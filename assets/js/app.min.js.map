{"version":3,"names":["Home","constructor","this","state","bp","document","body","dataset","basepath","window","location","origin","basePath","URL","supportsWebP","checkWebPSupport","isSafari","navigator","userAgent","indexOf","initialRoute","currentIndex","pageTransitionTime","matchMedia","matches","scale","scrollSpeed","draggableInstance","handleMouseWheel","bind","updateBounds","handleMouseMove","querySelector","classList","add","fullPath","pathname","relativePath","startsWith","slice","length","endsWith","initialState","path","filter","split","project","href","history","replaceState","initializeRouter","handleStateChange","isMobile","isTouch","maxTouchPoints","msMaxTouchPoints","addEventListener","event","navigate","url","arguments","undefined","base","target","relative","search","hash","pushState","error","console","setState","closeIndex","closeProject","closeAbout","showFeatured","closeFeatured","showFilter","showIndex","showProject","showAbout","additionalData","JSON","stringify","setActiveButton","activeButton","querySelectorAll","forEach","button","remove","timeout","initializePage","setTimeout","figure","Math","random","initializeCanvas","loadMedia","showAdditionalMenu","scrollTo","categories","includes","projectSlug","clickedFigure","allFigures","initializeGallery","contains","initializeHiddenGallery","checkForCaption","hideAdditionalMenu","innerHTML","menu","style","width","fullWidth","offsetWidth","gsap","to","duration","ease","onComplete","menuButtons","opacity","stagger","initializeMobileEvents","closeMobileMenus","dispatchEvent","Event","bubbles","registerPlugin","Draggable","InertiaPlugin","config","nullTargetWarn","initializeFeaturedLayout","initializeObserver","initializeNavigation","observer","IntersectionObserver","entries","entry","isIntersecting","root","threshold","item","observe","calculateBounds","container","minX","innerWidth","minY","offsetHeight","innerHeight","maxX","maxY","currentX","getProperty","currentY","newX","deltaX","newY","deltaY","bounds","utils","clamp","x","y","onUpdate","update","applyBounds","e","containerInner","closest","mouseX","clientX","mouseY","clientY","nudgeAmountX","nudgeAmountY","kill","removeEventListener","create","type","edgeResistance","inertia","throwProps","throwResistance","maxDuration","minDuration","onDrag","onThrowUpdate","viewportWidth","viewportHeight","initialX","initialY","set","targetScale","items","img","link","imgWidth","parseInt","attributes","value","imgHeight","height","ratio","randomSizeLongEdge","floor","itemWidth","itemHeight","concat","padding","parallax","toFixed","featuredContainer","Packery","itemSelector","resize","setNavigationListeners","initializeNavEvents","initializeProjectsEvents","initializeGalleryEvents","preventDefault","navTimeout","nav","clearTimeout","projectLinks","pageTitle","hoverTimeout","preventInteraction","title","textContent","parentContainer","otherFigure","prevButton","nextButton","closeButton","galleryInner","updateGallery","direction","slides","Array","from","slide","loadAdjacentSlides","currentSlide","setGalleryFigureWidthSafari","loadedVideo","setVideoDimensions","currentSlideFirstFigure","currentSlideTitle","timeline","currentProjectSlug","projectSlides","projectIndex","toString","padStart","projectTotal","galleryIndexElement","newSlug","currentActiveSlug","newUrl","tagName","toLowerCase","clickX","screenWidth","hammer","Hammer","on","getAttribute","back","key","activeSlide","figures","hiddenCaption","caption","display","activeFigures","activeFiguresArray","processedIndices","Set","index","has","isDiptych","nextFigure","sameProject","push","slideFigures","createElement","figureElement","Object","client","projectUrl","gallery","galleryjpeg","galleryWidth","galleryHeight","videoUrl","isPortrait","autoplay","_ref","camelCase","kebabCase","setAttribute","isVideo","mediaUrl","mediaWidth","mediaHeight","videoElement","src","poster","loop","playsInline","preload","muted","controls","controlsList","aspectRatio","appendChild","imgElement","srcjpeg","slidesInGallery","startIndex","clickedGallery","findIndex","some","startingSlideTitle","String","firstSlide","startVideos","videos","video","play","stopVideos","pause","totalSlides","hasAttribute","canvas","getContext","toDataURL","mediaElements","Promise","all","map","media","resolve","onloadeddata","onload","onerror","then","requestAnimationFrame","containerWidth","parentElement","clientWidth","containerHeight","clientHeight","intrinsicWidth","intrinsicHeight","widthRatio","heightRatio","min","finalWidth","round","finalHeight","nextElementSibling","nextMedia","nextIntrinsicWidth","nextWidthRatio","nextHeightRatio","nextFinalWidth","home"],"sources":["modules/home.js","app.js"],"sourcesContent":["export default class Home {\n\tconstructor() {\n\t\tthis.state = null; // Current app state\n\t\t//this.basePath = document.body.getAttribute(\"data-basepath\") === \"https://paulcalver.co\" || document.body.getAttribute(\"data-basepath\") === \"https://paulcalver.cc\" ? document.body.getAttribute(\"data-basepath\") : new URL(document.body.getAttribute(\"data-basepath\") || window.location.origin).pathname; // Extract the path portion of the base URL\n\n\t\tconst bp = document.body.dataset.basepath || window.location.origin;\n\t\t// Use the full origin instead of .pathname so localhost isnâ€™t just \"/\"\n\t\tthis.basePath = (\n  \t\tbp === 'https://paulcalver.co' || bp === 'https://paulcalver.cc'\n\t\t) ? bp : new URL(bp).origin;\n\t\t// this.basePath = document.body.getAttribute(\"data-basepath\"); // Extract the path portion of the base URL\n\n\t\tthis.supportsWebP = this.checkWebPSupport();\n\n\t\tthis.isSafari = navigator.userAgent.indexOf('Safari') != -1 && navigator.userAgent.indexOf('Chrome') == -1;\n\n\n\t\tthis.initialRoute = true;\n\t\tthis.currentIndex = 0; // Initialize the currentIndex at 0\n\t\tthis.pageTransitionTime = window.matchMedia(\"(max-width: 768px)\").matches ? 10 : 500; // Duration of the page transition animation\n\n\t\tthis.scale = 1; // Default scale\n        this.scrollSpeed = 3; // Global scroll sensitivity\n        this.draggableInstance = null;\n\n        // Bind event listeners to ensure they can be properly added/removed\n        this.handleMouseWheel = this.handleMouseWheel.bind(this);\n        this.updateBounds = this.updateBounds.bind(this);\n        this.handleMouseMove = this.handleMouseMove.bind(this);\n\n\n\t\tif (navigator.userAgent.indexOf('Safari') != -1 && navigator.userAgent.indexOf('Chrome') == -1) {\n\t\t\tdocument.querySelector('html').classList.add('is-safari');\n\t\t}\n\t\t\n\t\t// Determine initial state based on the current URL\n\t\tconst fullPath = window.location.pathname;\n\t\tlet relativePath = fullPath.startsWith(this.basePath)\n\t\t\t? fullPath.slice(this.basePath.length)\n\t\t\t: fullPath;\n\t\t\n\t\t// Remove trailing slash if present (except for root \"/\")\n\t\trelativePath = relativePath.endsWith(\"/\") && relativePath !== \"/\"\n\t\t\t? relativePath.slice(0, -1)\n\t\t\t: relativePath;\n\t\t\n\t\t// Prepare initial state data\n\t\tlet initialState = { path: relativePath };\n\t\tif (relativePath === \"/\" || relativePath === \"\") {\n\t\t\tinitialState = { state: \"featured\" };\n\t\t} else if (relativePath.startsWith(\"/filter/\")) {\n\t\t\tconst filter = relativePath.split(\"/filter/\")[1];\n\t\t\tinitialState = { state: \"filter\", filter };\n\t\t} else if (relativePath === \"/projects\") {\n\t\t\tinitialState = { state: \"index\" };\n\t\t} else if (relativePath.startsWith(\"/projects/\")) {\n\t\t\tconst project = relativePath.split(\"/projects/\")[1];\n\t\t\t// console.log(project);\n\t\t\tinitialState = { state: \"project\", project };\n\t\t} else if (relativePath === \"/about\") {\n\t\t\tinitialState = { state: \"about\" };\n\t\t} else {\n\t\t\twindow.location.href = this.basePath; // Redirect to basePath for unknown routes\n\t\t}\n\n\t\t// Set the initial state in history\n\t\thistory.replaceState(initialState, \"\", window.location.href);\n\n\t\tthis.initializeRouter();\n\t\tthis.handleStateChange();\n\t}\n\n\tisMobile() {\n\t\treturn window.matchMedia(\"(max-width: 768px)\").matches;\n\t}\n\n\tisTouch() {\n\t\treturn 'ontouchstart' in window || navigator.maxTouchPoints > 0 || navigator.msMaxTouchPoints > 0;\n\t}\n\n\tinitializeRouter() {\n\t\twindow.addEventListener(\"popstate\", (event) => {\n\t\t\tthis.handleStateChange();\n\t\t\t// console.log(\"Popstate triggered with state:\", event.state);\n\t\t});\n\t}\n\n\t// navigate(url, state = {}) {\n\t// \ttry {\n\t// \t\tconst fullUrl = this.basePath + url;\n\t// \t\t// console.log(fullUrl, this.basePath, url);\n\t// \t\thistory.pushState(state, \"\", fullUrl);\n\n\t// \t\t// Trigger `handleStateChange` only if not on the initial route\n\t// \t\tif (!this.initialRoute) {\n\t// \t\t\tthis.handleStateChange();\n\t// \t\t}\n\t// \t} catch (error) {\n\t// \t\tconsole.error(\"Failed to navigate:\", error);\n\t// \t}\n\t// }\n\nnavigate(url, state = {}) {\n  try {\n    // Resolve the target against a safe base (works local + live)\n    const base   = document.body.dataset.basepath || window.location.origin;\n    const target = new URL(url, base);\n\n    // Push a same-origin relative URL to avoid cross-origin pushState errors\n    const relative = target.pathname + target.search + target.hash;\n    history.pushState(state, \"\", relative);\n\n    if (!this.initialRoute) this.handleStateChange();\n  } catch (error) {\n    console.error(\"Failed to navigate:\", error);\n  }\n}\n\n\thandleStateChange() {\n\t\tconst fullPath = window.location.pathname;\n\n\t\t// Strip the base path from the current pathname\n\t\tlet relativePath = fullPath.startsWith(this.basePath)\n\t\t\t? fullPath.slice(this.basePath.length)\n\t\t\t: fullPath;\n\n\t\trelativePath = relativePath.endsWith(\"/\") && relativePath !== \"/\"\n\t\t? relativePath.slice(0, -1)\n\t\t: relativePath;\n\t\t\t\n\n\t\tif (relativePath === \"/\" || relativePath === \"\") {\n\t\t\tthis.setState(\"featured\");\n\t\t\tif(!this.initialRoute) {\n\t\t\t\tthis.closeIndex();\n\t\t\t\tthis.closeProject();\n\t\t\t\tthis.closeAbout();\n\t\t\t}\n\t\t\tthis.showFeatured(this.initialRoute); // Only call `showHome` here\n\t\t} else if (relativePath.startsWith(\"/filter/\")) {\n\t\t\tconst filter = relativePath.split(\"/filter/\")[1];\n\t\t\tthis.setState(\"filter\", { filter });\n\t\t\tif(!this.initialRoute) {\n\t\t\t\tthis.closeFeatured();\n\t\t\t\tthis.closeProject();\n\t\t\t\tthis.closeAbout();\n\t\t\t}\n\t\t\tthis.showFilter(filter, this.initialRoute); // Only call `showFilter` here\n\t\t} else if (relativePath === \"/projects\") {\n\t\t\tthis.setState(\"index\");\n\t\t\tif(!this.initialRoute) {\n\t\t\t\tthis.closeFeatured();\n\t\t\t\tthis.closeProject();\n\t\t\t\tthis.closeAbout();\n\t\t\t}\n\t\t\tthis.showIndex(this.initialRoute); // Only call `showProjects` here\n\t\t} else if (relativePath.startsWith(\"/projects/\")) {\n\t\t\tconst project = relativePath.split(\"/projects/\")[1];\n\t\t\tthis.setState(\"project\", { project });\n\t\t\tif(!this.initialRoute) {\n\t\t\t\tthis.closeFeatured();\n\t\t\t\tthis.closeIndex();\n\t\t\t\tthis.closeAbout();\n\t\t\t}\n\t\t\tthis.showProject(project, null, null, this.initialRoute); // Pass no clicked item\n\t\t} else if (relativePath === \"/about\") {\n\t\t\tthis.setState(\"about\");\n\t\t\tif(!this.initialRoute) {\n\t\t\t\tthis.closeFeatured();\n\t\t\t\tthis.closeIndex();\n\t\t\t\tthis.closeProject();\n\t\t\t}\n\t\t\tthis.showAbout(this.initialRoute); // Only call `showAbout` here\n\t\t} else {\n\t\t\tconsole.error(\"Unknown state for relative path:\", relativePath);\n\t\t}\n\n\n\t\t// Set initialRoute to false after the first run\n\t\tif (this.initialRoute) {\n\t\t\tthis.initialRoute = false;\n\t\t\t// console.log(\"Initial route setup complete\");\n\t\t}\n\t}\n\n\tsetState(state, additionalData = null) {\n\t\tif (this.state === state && JSON.stringify(this.additionalData) === JSON.stringify(additionalData)) {\n\t\t\treturn; // Avoid redundant updates\n\t\t}\n\n\t\tthis.state = state;\n\t\tthis.additionalData = additionalData;\n\n\t\t// Log state changes for debugging\n\t\t// console.log(\"State updated:\", state, additionalData);\n\t}\n\n\tsetActiveButton(activeButton) {\n\t\tconst buttons = document.querySelectorAll('.menu a');\n\t\tbuttons.forEach(button => button.classList.remove('active-button'));\n\t\tactiveButton.classList.add('active-button');\n\t}\n\n\n    // Methods to handle visuals for each state\n    showFeatured(initialRoute = false) {\n\t\tlet timeout = initialRoute ? 0 : this.pageTransitionTime;\n\n\t\tif (initialRoute) {\n\t\t\t// console.log(\"Initial route detected\");\n\n\n\t\t\tthis.initializePage();\n\n\n\t\t\t\n\t\t} else {\n\n\t\t\t\n\t\t}\n\n\t\tdocument.querySelector('.featured').classList.add('active-section');\n\t\tdocument.body.classList.add('featured-active');\n\t\tthis.setActiveButton(document.querySelector('.featured-link'));\n\n\t\t\n\n\n\t\tsetTimeout(() => {\n\n\n\t\t\tdocument.querySelectorAll('.featured figure').forEach(figure => {\n\t\t\t\tfigure.classList.remove('hide');\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tfigure.classList.remove('unfiltered-figure');\n\t\t\t\t}, 10);\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tfigure.classList.remove('stagger');\n\t\t\t\t}, Math.random() * 1200);\n\t\t\t});\n\n\t\t\tif(!this.isMobile()) {\n\t\t\t\tthis.initializeCanvas(document.querySelector('.featured-items'), initialRoute);\n\t\t\t}\n\n\n\t\t\tthis.loadMedia(document.querySelector('.featured'));\n\t\t}, timeout);\n\n    }\n\n\tshowIndex(initialRoute = false) {\n\t\tlet timeout = initialRoute ? 0 : this.pageTransitionTime;\n\t\tif (initialRoute) {\n\t\t\t// console.log(\"Initial route detected\");\n\n\n\t\t\tthis.initializePage();\n\n\t\t\t\n\t\t} else {\n\n\t\t\t\n\t\t}\n\t\t\n\t\t// setTimeout(() => {\n\t\tif(!this.isMobile()) {\n\t\t\tthis.showAdditionalMenu(document.querySelector('.filters'));\n\t\t}\n\t\t// }, 1000);\n\n\t\tdocument.querySelector('.index').classList.add('active-section');\n\t\tdocument.body.classList.add('index-active');\n\t\tthis.setActiveButton(document.querySelector('.index-link'));\n\n\t\tdocument.querySelectorAll('.index figure').forEach(figure => {\n\t\t\tfigure.classList.add('unfiltered-figure');\n\t\t\tfigure.classList.add('stagger');\n\t\t});\n\n\n\n\t\tsetTimeout(() => {\n\n\t\t\tdocument.querySelectorAll('.index figure').forEach(figure => {\n\t\t\t\tfigure.classList.add('hide');\n\t\t\t\tfigure.classList.remove('hide');\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tfigure.classList.remove('unfiltered-figure');\n\t\t\t\t}, 10);\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tfigure.classList.remove('stagger');\n\t\t\t\t}, Math.random() * 1200);\n\t\t\t});\n\n\t\t\tif(!this.isMobile()) {\n\t\t\t\tthis.initializeCanvas(document.querySelector('.index-items'));\n\t\t\t}\n\n\t\t\tthis.loadMedia(document.querySelector('.index'));\n\t\t}, timeout);\n\n    }\n\n    showFilter(filter, initialRoute = false) {\n\t\tlet timeout = initialRoute ? 0 : this.pageTransitionTime;\n\t\tif (initialRoute) {\n\t\t\t// console.log(\"Initial route detected\");\n\n\n\t\t\tthis.initializePage();\n\n\t\t\t\n\t\t} else {\n\n\t\t\t\n\t\t}\n\n\t\t// setTimeout(() => {\n\t\tif(!this.isMobile()) {\n\t\t\tthis.showAdditionalMenu(document.querySelector('.filters'));\n\t\t}\n\t\t// }, 1000);\n\n        document.querySelector('.index').classList.add('active-section');\n\t\tdocument.body.classList.add('index-active');\n\t\tthis.setActiveButton(document.querySelector('.filter-button[data-filter=\"' + filter + '\"]'));\n\n\t\tdocument.querySelectorAll('.index figure').forEach(figure => {\n\t\t\tfigure.classList.add('unfiltered-figure');\n\t\t\tfigure.classList.add('stagger');\n\t\t});\n\n\t\t\n\t\t\n\t\tsetTimeout(() => {\n\n\t\t\tif(this.isMobile()) {\n\n\t\t\t\tdocument.querySelector('.index').scrollTo(0, 0);\n\n\t\t\t}\n\n\t\t\tdocument.querySelectorAll('.index figure').forEach(figure => {\n\n\t\t\t\tfigure.classList.add('hide');\n\n\t\t\t\tconst categories = figure.dataset.categories ? figure.dataset.categories.split(',') : [];\n\t\t\t\tconst shouldShow = !filter || categories.includes(filter);\n\t\n\t\t\t\tif (shouldShow) {\n\t\t\t\t\tfigure.classList.remove('hide');\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tfigure.classList.remove('unfiltered-figure');\n\t\t\t\t\t}, 10);\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tfigure.classList.remove('stagger');\n\t\t\t\t\t}, Math.random() * 300);\n\t\t\t\t} \n\t\t\t});\n\n\t\t\tif(!this.isMobile()) {\n\t\t\t\tthis.initializeCanvas(document.querySelector('.index-items'));\n\t\t\t}\n\n\n\t\t\tthis.loadMedia(document.querySelector('.index'));\n\t\t}, timeout);\n\t\t\n    }\n\n    showProject(projectSlug, clickedFigure = null, allFigures = null, initialRoute = false) {\n\t\tlet timeout = initialRoute ? 0 : this.pageTransitionTime;\n\t\tif (initialRoute) {\n\t\t\t// console.log(\"Initial route detected\");\n\n\t\t\tthis.initializePage(initialRoute);\n\t\t\t\n\t\t} else {\n\n\t\t\t\n\t\t}\n\n\t\t\n\n\t\tsetTimeout(() => {\n\t\t\tconst gallery = document.querySelector('.gallery');\n\t\t\tgallery.classList.add('active-section');\n\t\t\tthis.initializeGallery(projectSlug, clickedFigure, allFigures, initialRoute);\n\t\t\tif(!document.body.classList.contains('hidden-page')) {\n\t\t\t\t// this.initializeGallery(projectSlug, clickedFigure, allFigures, initialRoute);\n\t\t\t} else {\n\t\t\t\tthis.initializeHiddenGallery();\n\t\t\t\tthis.checkForCaption();\n\t\t\t}\n\t\t\tdocument.body.classList.add('gallery-active');\n\t\t}, timeout);\n\t}\n\n    showAbout(initialRoute = false) {\n\t\tlet timeout = initialRoute ? 0 : this.pageTransitionTime;\n\t\tif (initialRoute) {\n\t\t\t// console.log(\"Initial route detected\");\n\n\t\t\tthis.initializePage();\n\t\t\t\n\t\t} else {\n\n\t\t\t\n\t\t}\n\n\t\t// setTimeout(() => {\n\t\tif(!this.isMobile()) {\n\t\t\tthis.showAdditionalMenu(document.querySelector('.external-links'));\n\t\t}\n\t\t// }, 1000);\n\n\t\tsetTimeout(() => {\n\t\t\tdocument.querySelector('.about').classList.add('active-section');\n\t\t\tdocument.body.classList.add('about-active');\n\t\t\tthis.setActiveButton(document.querySelector('.about-link'));\n\t\t}, timeout);\n\n\n    }\n\n\t\n\n\tcloseFeatured() {\n\t\t// console.log('close featured');\n\t\t\n\n\t\tsetTimeout(() => {\n\t\t\tdocument.querySelector('.featured').classList.remove('active-section');\n\t\t\tdocument.body.classList.remove('featured-active');\n\t\t}, this.pageTransitionTime);\n\n\t\tdocument.querySelectorAll('.featured figure').forEach(figure => {\n\t\t\tfigure.classList.add('unfiltered-figure');\n\t\t\tfigure.classList.add('stagger');\n\t\t\tsetTimeout(() => {\n\t\t\t\tfigure.classList.add('hide');\n\t\t\t}, this.pageTransitionTime);\n\t\t});\n\t}\n\n\tcloseIndex() {\n\t\t// console.log('close projects');\n\n\t\tsetTimeout(() => {\n\t\t\tdocument.querySelector('.index').classList.remove('active-section');\n\t\t\tdocument.body.classList.remove('index-active');\n\t\t}, this.pageTransitionTime);\n\n\t\t// setTimeout(() => {\n\t\t\tif(!this.isMobile()) {\n\t\t\t\tthis.hideAdditionalMenu(document.querySelector('.filters'));\n\t\t\t}\n\t\t// }, 1000);\n\n\t\tdocument.querySelectorAll('.index figure').forEach(figure => {\n\t\t\tfigure.classList.add('unfiltered-figure');\n\t\t\tfigure.classList.add('stagger');\n\t\t\tsetTimeout(() => {\n\t\t\t\tfigure.classList.add('hide');\n\t\t\t}, this.pageTransitionTime);\n\t\t});\n\t}\n\n\tcloseProject() {\n\t\tdocument.querySelector('.gallery').classList.remove('active-section');\n\t\tdocument.body.classList.remove('gallery-active');\n\t\tsetTimeout(() => {\n\t\t\tdocument.querySelector('.gallery-inner').innerHTML = '';\n\t\t}, this.pageTransitionTime);\n\t}\n\n\tcloseAbout() {\n\t\tdocument.querySelector('.about').classList.remove('active-section');\n\t\tdocument.body.classList.remove('about-active');\n\n\t\t// setTimeout(() => {\n\t\tif(!this.isMobile()) {\n\t\t\tthis.hideAdditionalMenu(document.querySelector('.external-links'));\n\t\t}\n\t\t// }, 1000);\n\t}\n\n\tshowAdditionalMenu(menu) {\n\t\tif (!menu || menu.style.width === 'auto') return;\n\t\tmenu.style.width = 'auto';\n\t\tconst fullWidth = menu.offsetWidth;\n\n\t\t// Reset width to 0 to prepare for animation\n\t\tmenu.style.width = '0';\n\n\t\t// Animate the width using GSAP\n\t\tgsap.to(menu, {\n\t\t\twidth: fullWidth,\n\t\t\tduration: 0.5,\n\t\t\tease: 'power4.out',\n\t\t\tonComplete: () => {\n\t\t\t\t// Optional: Clean up inline styles if necessary\n\t\t\t\tmenu.style.width = 'auto';\n\n\t\t\t\tconst menuButtons = menu.querySelectorAll('a');\n\t\t\t\tgsap.to(menuButtons, {\n\t\t\t\t\topacity: 1,\n\t\t\t\t\tduration: 0.5,\n\t\t\t\t\tstagger: 0.1, // Stagger animation for each button\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\thideAdditionalMenu(menu) {\n\t\tif (!menu) return;\n\t\tconst menuButtons = menu.querySelectorAll('a');\n\n\t\tgsap.to(menuButtons, {\n\t\t\topacity: 0,\n\t\t\tduration: 0.5,\n\t\t\tstagger: -0.1, // Stagger animation for each button\n\t\t\tonComplete: () => {\n\t\t\t\tgsap.to(menu, {\n\t\t\t\t\twidth: 0,\n\t\t\t\t\tduration: 0.5,\n\t\t\t\t\tease: 'power4.out',\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tinitializeMobileEvents(){\n\t\tdocument.querySelector('.mobile-button-filters').addEventListener('click', () => {\n\t\t\tdocument.body.classList.add('mobile-filters-open');\n\t\t});\n\n\t\tdocument.querySelector('.mobile-button-menu').addEventListener('click', () => {\n\t\t\tdocument.body.classList.add('mobile-menu-open');\n\t\t});\n\n\t\tdocument.querySelector('.mobile-button-close').addEventListener('click', () => {\n\t\t\tthis.closeMobileMenus();\n\t\t});\n\t}\n\n\tcloseMobileMenus() {\n\t\tif(document.body.classList.contains('gallery-active')) {\n\t\t\tconst closeButton = document.querySelector('.project-controls .close');\n\t\t\tcloseButton.dispatchEvent(new Event('click', { bubbles: true }));\n\t\t} else {\n\t\t\tdocument.body.classList.remove('mobile-menu-open');\n\t\t\tdocument.body.classList.remove('mobile-filters-open');\n\t\t}\n\t}\n\n\tinitializePage(initialRoute = false) {\n\n\t\tgsap.registerPlugin(Draggable, InertiaPlugin);\n\t\tgsap.config({\n\t\t\tnullTargetWarn: false,\n\t\t});\n\n\t\tif(!this.isMobile()) {\n\t\t\tthis.initializeFeaturedLayout();\n\t\t\tthis.initializeObserver();\n\t\t} else {\n\t\t\tthis.initializeMobileEvents();\n\t\t}\n\n\t\tthis.initializeNavigation(initialRoute);\n\t}\n\n\tinitializeObserver() {\n\t\tconst observer = new IntersectionObserver((entries) => {\n\t\t\tentries.forEach(entry => {\n\t\t\t\tif (entry.isIntersecting) {\n\t\t\t\t\t// Image is in view, set opacity to 1 and scale to 1\n\t\t\t\t\tgsap.to(entry.target, { \n\t\t\t\t\t\topacity: 1, \n\t\t\t\t\t\tscale: 1,  // Scale to 1 when visible\n\t\t\t\t\t\tduration: 1,\n\t\t\t\t\t\tease: \"power2.out\"\n\t\t\t\t\t});\n\t\n\t\t\t\t} else {\n\t\t\t\t\t// Image is out of view, set opacity to 0.5 and scale to 0.75\n\t\t\t\t\tgsap.to(entry.target, { \n\t\t\t\t\t\topacity: 0.25, \n\t\t\t\t\t\tscale: 0.9,  // Scale down when not visible\n\t\t\t\t\t\tduration: 1,\n\t\t\t\t\t\tease: \"power2.out\"\n\t\t\t\t\t});\n\t\n\t\t\t\t}\n\t\t\t});\n\t\t}, {\n\t\t\troot: null,  // Track visibility relative to the viewport\n\t\t\tthreshold: 0.1 // Trigger when at least 10% of the image is visible\n\t\t});\n\n\t\tdocument.querySelectorAll('.index .project-link-inner, .featured .project-link-inner').forEach(item => {\n\t\t\tobserver.observe(item);\n\t\t});\n\t}\n\n\tcalculateBounds(container) {\n        const maxX = -container.offsetWidth * this.scale + window.innerWidth;\n        const maxY = -container.offsetHeight * this.scale + window.innerHeight;\n        return { minX: maxX, minY: maxY, maxX: 0, maxY: 0 };\n    }\n\n    handleMouseWheel(event) {\n        if (!this.draggableInstance) return;\n\n        const container = this.draggableInstance.target;\n        const currentX = gsap.getProperty(container, 'x');\n        const currentY = gsap.getProperty(container, 'y');\n\n        let newX = currentX - event.deltaX * this.scrollSpeed;\n        let newY = currentY - event.deltaY * this.scrollSpeed;\n\n        const bounds = this.calculateBounds(container);\n\n        newX = gsap.utils.clamp(bounds.minX, bounds.maxX, newX);\n        newY = gsap.utils.clamp(bounds.minY, bounds.maxY, newY);\n\n        gsap.to(container, {\n            x: newX,\n            y: newY,\n            duration: 0.3,\n            ease: \"power2.out\",\n\t\t\tonUpdate: () => this.draggableInstance.update(),\n    \t\tonComplete: () => this.draggableInstance.update(),\n        });\n\n\t\tthis.updateBounds();\n    }\n\n    updateBounds() {\n        if (this.draggableInstance) {\n            const container = this.draggableInstance.target;\n            this.draggableInstance.applyBounds(this.calculateBounds(container));\n        }\n    }\n\n    handleMouseMove(e) {\n        if (!this.draggableInstance) return;\n\n        const containerInner = this.draggableInstance.target.closest('.container-inner');\n        const maxNudge = 50;\n        const mouseX = e.clientX;\n        const mouseY = e.clientY;\n\n        const nudgeAmountX = ((mouseX / window.innerWidth) - 0.5) * maxNudge;\n        const nudgeAmountY = ((mouseY / window.innerHeight) - 0.5) * maxNudge;\n\n        gsap.to(containerInner, {\n            x: nudgeAmountX,\n            y: nudgeAmountY,\n            duration: 1.5,\n            ease: 'power3.out',\n        });\n    }\n\n    initializeCanvas(container, initialRoute = false) {\n        const containerInner = container.closest('.container-inner');\n\n        // Remove previous Draggable instance\n        if (this.draggableInstance) {\n            this.draggableInstance.kill();\n        }\n\n        // Remove existing event listeners\n        window.removeEventListener('wheel', this.handleMouseWheel);\n        window.removeEventListener('resize', this.updateBounds);\n        window.removeEventListener('mousemove', this.handleMouseMove);\n\n        this.draggableInstance = Draggable.create(container, {\n\t\t\ttype: \"x,y\",\n\t\t\tedgeResistance: 0.85,\n\t\t\tinertia: true,\n\t\t\tbounds: this.calculateBounds(container),\n\t\t\tthrowProps: true,\n\t\t\tthrowResistance: 20000,\n\t\t\tmaxDuration: 3,\n\t\t\tminDuration: 0.5,\n\t\t\tonDrag: () => {\n\t\t\t\tconst bounds = this.calculateBounds(container);\n\t\t\t\tgsap.utils.clamp(bounds.minX, bounds.maxX, gsap.getProperty(container, 'x'));\n\t\t\t\tgsap.utils.clamp(bounds.minY, bounds.maxY, gsap.getProperty(container, 'y'));\n\t\t\t},\n\t\t\tonThrowUpdate: () => {\n\t\t\t\tthis.updateBounds();\n\t\t\t}\n\t\t})[0];\n\n        // Add event listeners\n        window.addEventListener('wheel', this.handleMouseWheel);\n        window.addEventListener('resize', this.updateBounds);\n        window.addEventListener('mousemove', this.handleMouseMove);\n\n        // Center the container\n        const viewportWidth = window.innerWidth;\n        const viewportHeight = window.innerHeight;\n\n        const containerWidth = container.offsetWidth;\n        const containerHeight = container.offsetHeight;\n\n        const initialX = (viewportWidth - containerWidth) / 2;\n        const initialY = (viewportHeight - containerHeight) / 2;\n\n        gsap.set(container, {\n            x: initialX,\n            y: initialY,\n        });\n\n\t\tif(container.classList.contains('featured-items') && initialRoute) {\n\t\t\t// this.preventInteraction = true;\n\t\t\tconst targetScale = 0.7;\n\t\t\tgsap.to(container, {\n\t\t\t\tscale: targetScale,\n\t\t\t\tduration: 0,\n\t\t\t\tease: 'power3.out',\n\t\t\t\tonUpdate: this.updateBounds()\n\t\t\t});\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tconst animationDuration = 2; // Total duration of the animation in seconds\n\t\t\t\n\t\t\t\t// Scale animation\n\t\t\t\tgsap.to(container, {\n\t\t\t\t\tscale: 1,\n\t\t\t\t\tduration: animationDuration,\n\t\t\t\t\tease: 'power3.out',\n\t\t\t\t\tonUpdate: () => this.updateBounds(),\n\t\t\t\t});\n\n\t\t\t}, 50);\n\t\t};\n    }\n\n\t\n\t\n\n\tinitializeFeaturedLayout() {\n\t\tlet totalWidth = 0;\n\t\tlet totalHeight = 0;\n\t\tlet totalArea = 0;\n\t\n\t\tconst items = document.querySelectorAll('.featured img, .featured video');\n\t\tconst totalItems = items.length;\n\t\n\t\tconst margins = 40; // Example margin size (left and right)\n\t\n\t\titems.forEach((img) => {\n\t\t\tconst figure = img.closest('figure');\n\t\t\tconst link = figure.querySelector('.project-link-inner');\n\t\t\tconst imgWidth = parseInt(img.attributes.width.value, 10);\n\t\t\tconst imgHeight = parseInt(img.attributes.height.value, 10);\n\t\n\t\t\tconst ratio = imgWidth / imgHeight; // Aspect ratio (width divided by height)\n\t\n\t\t\t// Random size for the long edge between 240 and 480\n\t\t\tconst min = 240;\n\t\t\tconst max = 480;\n\t\t\tconst randomSizeLongEdge = Math.floor(Math.random() * (max - min + 1) + min);\n\t\n\t\t\tlet itemWidth, itemHeight;\n\t\n\t\t\t// Determine if width or height is the longest edge\n\t\t\tif (imgWidth >= imgHeight) {\n\t\t\t\t// Width is the longest edge\n\t\t\t\titemWidth = randomSizeLongEdge;\n\t\t\t\titemHeight = Math.floor(randomSizeLongEdge / ratio);\n\t\t\t} else {\n\t\t\t\t// Height is the longest edge\n\t\t\t\titemHeight = randomSizeLongEdge;\n\t\t\t\titemWidth = Math.floor(randomSizeLongEdge * ratio);\n\t\t\t}\n\t\n\t\t\t// Add the item's width and height, including margins\n\t\t\ttotalWidth += itemWidth + margins;\n\t\t\ttotalHeight += itemHeight + margins;\n\t\n\t\t\ttotalArea += (itemWidth + margins) * (itemHeight + margins);\n\t\n\t\t\tlink.style.width = `${itemWidth}px`;\n\t\t\tlink.style.height = `${itemHeight}px`;\n\t\n\t\t\tconst minPadding = 40;\n\t\t\tconst maxPadding = 80;\n\t\n\t\t\tfigure.style.padding = `${Math.floor(Math.random() * (maxPadding - minPadding + 1) + minPadding)}px`;\n\t\n\t\t\tfigure.dataset.parallax = (Math.random() * 0.4 + 0.1).toFixed(2);\n\t\t});\n\t\n\t\t// Calculate grid dimensions based on 4:3 ratio\n\t\tconst approximateRows = Math.ceil(Math.sqrt(totalItems * (3 / 4))); // More rows due to 4:3\n\t\tconst approximateCols = Math.ceil(totalItems / approximateRows);\n\t\n\t\t// Calculate the container width based on the grid\n\t\tconst containerWidth = approximateCols * (totalWidth / totalItems);\n\t\tconst containerHeight = approximateRows * (totalHeight / totalItems);\n\t\n\t\t// Ensure container height roughly matches 4:3 ratio\n\t\tconst adjustedContainerWidth = Math.max(containerWidth, containerHeight * (4 / 3));\n\t\n\t\tconst featuredContainer = document.querySelector('.featured-items');\n\t\t// featuredContainer.style.width = `${adjustedContainerWidth}px`;\n\t\n\t\t// Initialize Packery layout\n\t\tvar iso = new Packery('.featured-items', {\n\t\t\titemSelector: 'figure',\n\t\t\tresize: false\n\t\t});\n\n\t\tfeaturedContainer.style.width = document.querySelector('.featured-items').offsetWidth + 'px';\n\t}\n\n\n\tinitializeNavigation(initialRoute = false) {\n\t\t// console.log('initialize navigation');\n\t\tthis.setNavigationListeners(initialRoute);\n\t}\n\n\tsetNavigationListeners(initialRoute = false) {\n\t\tthis.initializeNavEvents();\n\t\tthis.initializeProjectsEvents();\n\t\tthis.initializeGalleryEvents(initialRoute);\n\t}\n\n\tinitializeNavEvents() {\n\t\tdocument.querySelector('.home-link').addEventListener('click', (e) => {\n\t\t\te.preventDefault();\n\t\t\tif(this.isMobile){\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.closeMobileMenus();\n\t\t\t\t}, 200);\n\t\t\t}\n\t\t\tthis.navigate('/', { state: 'featured' });\n\t\t});\n\n\t\tdocument.querySelector('.featured-link').addEventListener('click', (e) => {\n\t\t\te.preventDefault();\n\t\t\tif(this.isMobile){\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.closeMobileMenus();\n\t\t\t\t}, 200);\n\t\t\t}\n\t\t\tthis.navigate('/', { state: 'featured' });\n\t\t});\n\n\t\tdocument.querySelector('.index-link').addEventListener('click', (e) => {\n\t\t\te.preventDefault();\n\t\t\tif(this.isMobile){\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.closeMobileMenus();\n\t\t\t\t}, 200);\n\t\t\t}\n\t\t\tthis.navigate('/projects', { state: 'index' });\n\t\t});\n\n\t\tdocument.querySelector('.about-link').addEventListener('click', (e) => {\n\t\t\te.preventDefault();\n\t\t\tif(this.isMobile){\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.closeMobileMenus();\n\t\t\t\t}, 200);\n\t\t\t}\n\t\t\tthis.navigate('/about', { state: 'about' });\n\t\t});\n\n\t\tconst filterLinks = document.querySelectorAll('.filter-button');\n\t\tfilterLinks.forEach(link => {\n\t\t\tlink.addEventListener('click', (e) => {\n\t\t\t\te.preventDefault();\n\t\t\t\tconst filter = link.dataset.filter;\n\t\t\t\tif(this.isMobile){\n\t\t\t\t\tthis.closeMobileMenus();\n\t\t\t\t}\n\t\t\t\tif(link.classList.contains('active-filter') || filter === 'all') {\n\t\t\t\t\tthis.navigate('/projects', { state: 'index' });\n\t\t\t\t} else {\n\t\t\t\t\tthis.navigate(`/filter/${filter}`, { state: 'filter', filter });\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\t\n\t\tif(!this.isMobile() && !this.isTouch()) {\n\t\t\tlet navTimeout; // To store the timeout ID\n\t\t\tconst nav = document.querySelector('nav'); // Replace with the actual nav selector\n\t\t\tnav.addEventListener('mouseenter', () => {\n\t\t\t\tclearTimeout(navTimeout);\n\t\t\t\tnavTimeout = setTimeout(() => {\n\t\t\t\t\tdocument.body.classList.add('highlight-nav');\n\t\t\t\t}, 500);\n\t\t\t});\n\n\t\t\tnav.addEventListener('mouseleave', () => {\n\t\t\t\tclearTimeout(navTimeout);\n\t\t\t\tdocument.body.classList.remove('highlight-nav');\n\t\t\t});\n\t\t}\n\t}\n\n\tinitializeProjectsEvents() {\n\t\tconst projectLinks = document.querySelectorAll('.project-link');\n\t\tconst pageTitle = document.querySelector('.page-title'); // Target the page title element\n\t\tlet hoverTimeout = null; // Variable to store the timeout ID\n\t\n\t\tprojectLinks.forEach(link => {\n\t\t\tconst figure = link.closest('figure'); // Get the figure associated with the link\n\t\t\t\n\n\t\t\tif(!this.isMobile() && !this.isTouch()) {\n\t\t\t\t// Hover event with a 200ms delay\n\t\t\t\tlink.addEventListener('mouseenter', () => {\n\n\t\t\t\t\tif(this.preventInteraction) return;\n\n\t\t\t\t\thoverTimeout = setTimeout(() => {\n\t\t\t\t\t\tconst title = figure.dataset.title; // Get the data-title attribute\n\t\t\t\t\t\tif (title) {\n\t\t\t\t\t\t\tpageTitle.textContent = title; // Set the page title to the figure's title\n\t\t\t\t\t\t\tdocument.body.classList.add('show-title');\n\t\t\t\t\t\t}\n\t\t\n\t\t\t\t\t\t// Add 'not-selected' to other figures in the parent container\n\t\t\t\t\t\tconst parentContainer = figure.closest('.index, .featured');\n\t\t\t\t\t\tif (parentContainer) {\n\t\t\t\t\t\t\tconst otherFigures = parentContainer.querySelectorAll('figure');\n\t\t\t\t\t\t\totherFigures.forEach(otherFigure => {\n\t\t\t\t\t\t\t\tif (otherFigure !== figure && otherFigure.dataset.projectSlug !== figure.dataset.projectSlug) {\n\t\t\t\t\t\t\t\t\totherFigure.classList.add('not-selected');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 500); // Delay of 200ms\n\t\t\t\t});\n\t\t\n\t\t\t\t// Clear the timeout and reset classes on mouseleave\n\t\t\t\tlink.addEventListener('mouseleave', () => {\n\t\t\t\t\tclearTimeout(hoverTimeout);\n\t\t\t\t\thoverTimeout = null;\n\t\t\t\t\tdocument.body.classList.remove('show-title');\n\t\t\n\t\t\t\t\t// Remove 'not-selected' from all figures in the parent container\n\t\t\t\t\tconst parentContainer = figure.closest('.index, .featured');\n\t\t\t\t\tif (parentContainer) {\n\t\t\t\t\t\tconst allFigures = parentContainer.querySelectorAll('figure');\n\t\t\t\t\t\tallFigures.forEach(otherFigure => otherFigure.classList.remove('not-selected'));\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t}\n\t\n\t\t\t// Clear the timeout on click\n\t\t\tlink.addEventListener('click', (e) => {\n\t\t\t\tclearTimeout(hoverTimeout);\n\t\t\t\thoverTimeout = null;\n\t\t\t\te.preventDefault(); // Prevent default navigation\n\t\t\t\t\n\t\t\t\tconst title = figure.dataset.title; // Get the data-title attribute\n\t\t\t\tif (title) {\n\t\t\t\t\tpageTitle.textContent = title; // Set the page title to the figure's title\n\t\t\t\t\t// document.body.classList.add('show-title');\n\t\t\t\t}\n\n\t\t\t\tconst projectSlug = figure.dataset.projectSlug;\n\t\t\t\tlet allFigures = null;\n\n\t\t\t\tif(document.querySelector('.featured').classList.contains('active-section')) {\n\t\t\t\t\tallFigures = document.querySelectorAll('.index figure[data-categories*=\"featured\"]');\n\t\t\t\t} else {\n\t\t\t\t\tallFigures = document.querySelectorAll('.index figure:not(.unfiltered-figure)');\n\t\t\t\t}\n\n\t\t\t\tdocument.body.classList.add('hold-title');\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tdocument.body.classList.remove('hold-title');\n\t\t\t\t}, 1000);\n\t\n\t\t\t\t// Navigate to the gallery and pass the clicked `figure`\n\t\t\t\tthis.navigate(`/projects/${projectSlug}`, { state: 'project', project: projectSlug });\n\t\t\t\tthis.showProject(projectSlug, figure, allFigures);\n\t\t\t});\n\t\t});\n\t}\n\n\tinitializeGalleryEvents(initialRoute = false) {\n\t\tconst prevButton = document.querySelector('.project-controls .previous');\n\t\tconst nextButton = document.querySelector('.project-controls .next');\n\t\tconst closeButton = document.querySelector('.project-controls .close');\n\t\tconst galleryInner = document.querySelector('.gallery-inner');\n\t\n\t\tconst updateGallery = (direction) => {\n\t\t\tconst slides = Array.from(galleryInner.querySelectorAll('.gallery-slide'));\n\t\t\n\t\t\t// Hide all slides to ensure only one is visible\n\t\t\tslides.forEach(slide => slide.classList.add('hide-slide'));\n\t\t\n\t\t\t// Update the current index based on the direction\n\t\t\tif (direction === 'next') {\n\t\t\t\tthis.currentIndex = (this.currentIndex + 1) % slides.length;\n\t\t\t\tthis.loadAdjacentSlides(slides[this.currentIndex]);\n\t\t\t} else if (direction === 'prev') {\n\t\t\t\tthis.currentIndex = (this.currentIndex - 1 + slides.length) % slides.length;\n\t\t\t\tthis.loadAdjacentSlides(slides[this.currentIndex]);\n\t\t\t}\n\t\t\n\t\t\t// Show the new current slide\n\t\t\tconst currentSlide = slides[this.currentIndex];\n\t\t\tcurrentSlide.classList.remove('hide-slide');\n\n\t\t\tconst currentFigures = currentSlide.querySelectorAll('figure');\n\t\t\tcurrentFigures.forEach(figure => {\n\t\t\t\t\n\t\t\t\t\n\n\t\t\t\tif (this.isSafari) {\n\t\t\t\t\tthis.setGalleryFigureWidthSafari(figure);\n\n\t\t\t\t\tif (figure.querySelector('video')) {\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tconst loadedVideo = figure.querySelector('video');\n\t\t\t\t\t\t\tthis.setVideoDimensions(loadedVideo);\n\t\t\t\t\t\t}, 100);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t\n\t\t\t});\n\t\t\n\t\t\t// Update the page title with the title of the current slide\n\t\t\tconst currentSlideFirstFigure = slides[this.currentIndex].querySelector('figure:nth-child(1)');\n\t\t\tconst currentSlideTitle = currentSlideFirstFigure.dataset.title;\n\n\t\t\tif (!this.isMobile() && !document.body.classList.contains('hidden-page')) {\n\t\t\t\tconst pageTitle = document.querySelector('.page-title');\n\t\t\t\tif (currentSlideTitle && pageTitle && pageTitle.textContent !== currentSlideTitle) {\n\t\t\t\t\t// Use GSAP for fade-out and fade-in\n\t\t\t\t\tgsap.timeline()\n\t\t\t\t\t\t.to(pageTitle, {\n\t\t\t\t\t\t\topacity: 0, // Fade out\n\t\t\t\t\t\t\tduration: 0.2, // Quicker animation\n\t\t\t\t\t\t\tease: \"power1.out\",\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.add(() => {\n\t\t\t\t\t\t\tpageTitle.textContent = currentSlideTitle; // Update title text\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.to(pageTitle, {\n\t\t\t\t\t\t\topacity: 1, // Fade in\n\t\t\t\t\t\t\tduration: 0.2, // Quicker animation\n\t\t\t\t\t\t\tease: \"power1.in\",\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst pageTitle = document.querySelector('.page-title');\n\t\t\t\tif (currentSlideTitle && pageTitle) {\n\t\t\t\t\tpageTitle.textContent = currentSlideTitle;\n\t\t\t\t}\n\t\t\t}\n\t\t\n\t\t\t// Update the gallery-index for the current project's slide count\n\t\t\tconst currentProjectSlug = currentSlideFirstFigure.dataset.projectSlug;\n\t\t\tconst projectSlides = slides.filter(slide => \n\t\t\t\tslide.querySelector('figure:nth-child(1)').dataset.projectSlug === currentProjectSlug\n\t\t\t);\n\t\t\tconst projectIndex = (projectSlides.indexOf(currentSlide) + 1).toString().padStart(2, '0'); // Ensures 2 digits\n\t\t\tconst projectTotal = projectSlides.length.toString().padStart(2, '0'); // Ensures 2 digits\n\t\t\t\n\t\t\n\t\t\tconst galleryIndexElement = document.querySelector('.project-index');\n\t\t\tif (galleryIndexElement) {\n\t\t\t\tgalleryIndexElement.textContent = `${projectIndex} | ${projectTotal}`;\n\t\t\t}\n\t\t\n\t\t\t// Check if the slug of the new slide is different from the current active slide\n\t\t\tconst newSlug = currentSlideFirstFigure.dataset.projectSlug;\n\t\t\tconst currentActiveSlug = slides[this.currentIndex].dataset.projectSlug;\n\t\t\n\t\t\tif (newSlug && newSlug !== currentActiveSlug) {\n\t\t\t\tconst newUrl = `${this.basePath}/projects/${newSlug}`;\n\t\t\t\thistory.replaceState({ state: 'project', project: newSlug }, '', newUrl);\n\t\t\t}\n\t\t\n\t\t\t// If it's a hidden page, check caption\n\t\t\tif (document.body.classList.contains('hidden-page')) {\n\t\t\t\tthis.checkForCaption();\n\t\t\t}\n\t\t};\n\n\t\tlet clearInitialRoute = false;\n\n\t\tif(!this.isMobile()) {\n\t\t\tdocument.querySelector('.gallery').addEventListener('click', (e) => {\n\t\t\t\t// Check if the target is a video or inside a video element\n\t\t\t\tif (e.target.tagName.toLowerCase() === 'video' || e.target.closest('video')) {\n\t\t\t\t\treturn; // Do nothing if it's a video\n\t\t\t\t}\n\t\t\t\n\t\t\t\t// Find the closest slide\n\t\t\t\tconst slide = e.target.closest('.gallery-slide');\n\t\t\t\tif (slide) {\n\t\t\t\t\tconst clickX = e.clientX; // Get the horizontal click position\n\t\t\t\t\tconst screenWidth = window.innerWidth; // Get the viewport width\n\t\t\t\n\t\t\t\t\tif (clickX < screenWidth / 2) {\n\t\t\t\t\t\tupdateGallery('prev'); // Clicked on the left side\n\t\t\t\t\t} else {\n\t\t\t\t\t\tupdateGallery('next'); // Clicked on the right side\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tconst hammer = new Hammer(document.querySelector('.gallery'));\n\t\thammer.on('swiperight', () => {\n\t\t\tupdateGallery('prev');\n\t\t});\n\t\thammer.on('swipeleft', () => {\n\t\t\tupdateGallery('next');\n\t\t});\n\t\n\t\tprevButton.addEventListener('click', () => updateGallery('prev'));\n\t\tnextButton.addEventListener('click', () => updateGallery('next'));\n\t\tcloseButton.addEventListener('click', () => {\n\t\t\tif((initialRoute && !clearInitialRoute) || document.body.classList.contains('hidden-page')) {\n\t\t\t\t// this.navigate('/', { state: 'featured' });\n\t\t\t\t// clearInitialRoute = true;\n\t\t\t\twindow.location.href = document.body.getAttribute('data-basepath');\n\t\t\t} else {\n\t\t\t\thistory.back();\n\t\t\t}\n\t\t});\n\n\t\tdocument.addEventListener('keydown', (event) => {\n\t\t\tswitch (event.key) {\n\t\t\t\tcase 'ArrowLeft': // Navigate to the previous slide\n\t\t\t\t\tupdateGallery('prev');\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'ArrowRight': // Navigate to the next slide\n\t\t\t\t\tupdateGallery('next');\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'Escape': // Close the gallery\n\t\t\t\t\thistory.back();\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak; // Ignore other keys\n\t\t\t}\n\t\t});\n\t}\n\n\tcheckForCaption() {\n\t\tconst activeSlide = document.querySelector('.gallery-slide:not(.hide-slide)');\n\t\tif(!activeSlide) return;\n\t\tconst figures = activeSlide.querySelectorAll('figure');\n\t\tconst hiddenCaption = document.querySelector('.hidden-caption');\n\n\t\t// Initialize caption as empty\n\t\tlet caption = '';\n\n\t\t// Loop through the figures to find the first data-caption\n\t\tfigures.forEach(figure => {\n\t\t\tif (figure.dataset.caption) {\n\t\t\t\tcaption = figure.dataset.caption;\n\t\t\t}\n\t\t});\n\n\t\t// Set the content and display of .hidden-caption\n\t\tif (caption) {\n\t\t\thiddenCaption.textContent = caption;\n\t\t\thiddenCaption.style.display = 'block';\n\t\t} else {\n\t\t\thiddenCaption.textContent = '';\n\t\t\thiddenCaption.style.display = 'none';\n\t\t}\n\n\t}\n\n\tinitializeGallery(projectSlug, clickedFigure = null, allFigures, initialRoute = false) {\n\n\t\t// console.log(initialRoute);\n\n\t\tconst galleryInner = document.querySelector('.gallery-inner');\n\t\tconst figures = Array.from(document.querySelectorAll('.index figure'));\n\n\t\t\n\t\tconst activeFigures = allFigures ? allFigures : document.querySelectorAll('.index figure');\n\t\tgalleryInner.innerHTML = ''; // Clear existing gallery content\n\t\tconst slides = [];\n\t\tlet currentSlide = [];\n\t\n\t\tconst activeFiguresArray = Array.from(activeFigures); // Convert NodeList to an array for mutability\n\t\tconst processedIndices = new Set(); // Keep track of indices that have been added to slides\n\n\t\tactiveFiguresArray.forEach((figure, index) => {\n\t\t\tif (processedIndices.has(index)) return; // Skip figures that have already been added to a slide\n\n\t\t\tconst isDiptych = figure.dataset.isDiptych === 'true';\n\t\t\tconst nextFigure = activeFiguresArray[index + 1];\n\t\t\tconst sameProject = nextFigure?.dataset.projectSlug === figure.dataset.projectSlug;\n\n\t\t\tif (isDiptych && sameProject) {\n\t\t\t\t// Add the current figure and the next figure as a diptych\n\t\t\t\tslides.push([figure, nextFigure]);\n\t\t\t\tprocessedIndices.add(index); // Mark the current figure as processed\n\t\t\t\tprocessedIndices.add(index + 1); // Mark the next figure as processed\n\t\t\t} else {\n\t\t\t\t// Add the current figure as a single slide\n\t\t\t\tslides.push([figure]);\n\t\t\t\tprocessedIndices.add(index); // Mark the current figure as processed\n\t\t\t}\n\t\t});\n\t\n\t\t// Generate slides dynamically\n\t\tslides.forEach(slideFigures => {\n\t\t\tconst slide = document.createElement('div');\n\t\t\tslide.classList.add('gallery-slide');\n\t\n\t\t\tslideFigures.forEach(figure => {\n\t\t\t\tconst figureElement = document.createElement('figure');\n\t\n\t\t\t\t// Map camelCase attributes back to kebab-case\n\t\t\t\tconst attributeMap = {\n\t\t\t\t\ttitle: 'data-title',\n\t\t\t\t\tclient: 'data-client',\n\t\t\t\t\tprojectUrl: 'data-project-url',\n\t\t\t\t\tprojectSlug: 'data-project-slug',\n\t\t\t\t\tgallery: 'data-gallery',\n\t\t\t\t\tgalleryjpeg: 'data-galleryjpeg',\n\t\t\t\t\tgalleryWidth: 'data-gallery-width',\n\t\t\t\t\tgalleryHeight: 'data-gallery-height',\n\t\t\t\t\tisDiptych: 'data-is-diptych',\n\t\t\t\t\tvideoUrl: 'data-video-url',\n\t\t\t\t\tisPortrait: 'data-is-portrait',\n\t\t\t\t\tautoplay: 'data-autoplay',\n\t\t\t\t\tcaption: 'data-caption',\n\t\t\t\t};\n\t\t\t\n\t\t\t\t// Copy relevant data attributes from the index figure to the gallery figure\n\t\t\t\tObject.entries(attributeMap).forEach(([camelCase, kebabCase]) => {\n\t\t\t\t\tif (figure.dataset[camelCase]) {\n\t\t\t\t\t\tfigureElement.setAttribute(kebabCase, figure.dataset[camelCase]);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\n\t\t\t\tconst isVideo = figure.dataset.videoUrl !== undefined;\n\t\t\t\tconst mediaUrl = figure.dataset.gallery;\n\t\t\t\tconst mediaWidth = figure.dataset.galleryWidth;\n\t\t\t\tconst mediaHeight = figure.dataset.galleryHeight;\n\t\n\t\t\t\tif (isVideo) {\n\t\t\t\t\tconst videoElement = document.createElement('video');\n\t\t\t\t\tvideoElement.src = figure.dataset.videoUrl;\n\t\t\t\t\tvideoElement.poster = figure.dataset.galleryjpeg || '';\n\t\t\t\t\tvideoElement.width = mediaWidth ? parseInt(mediaWidth, 10) : undefined;\n\t\t\t\t\tvideoElement.height = mediaHeight ? parseInt(mediaHeight, 10) : undefined;\n\t\t\t\t\tvideoElement.loop = true;\n\t\t\t\t\tvideoElement.playsInline = true;\n\t\t\t\t\tvideoElement.preload = 'metadata';\n\t\t\t\t\tif (figure.dataset.autoplay) {\n\t\t\t\t\t\tvideoElement.autoplay = true;\n\t\t\t\t\t\tvideoElement.muted = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvideoElement.controls = true;\n\t\t\t\t\t\tvideoElement.controlsList = 'nodownload';\n\t\t\t\t\t}\n\t\t\t\t\tvideoElement.style.aspectRatio = `${mediaWidth}/${mediaHeight}`;\n\t\t\t\t\tfigureElement.appendChild(videoElement);\n\t\t\t\t} else if (mediaUrl) {\n\t\t\t\t\tconst imgElement = document.createElement('img');\n\t\t\t\t\timgElement.src = 'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=';\n\t\t\t\t\timgElement.dataset.src = mediaUrl;\n\t\t\t\t\timgElement.dataset.srcjpeg = figure.dataset.galleryjpeg;\n\t\t\t\t\timgElement.width = mediaWidth ? parseInt(mediaWidth, 10) : undefined;\n\t\t\t\t\timgElement.height = mediaHeight ? parseInt(mediaHeight, 10) : undefined;\n\t\t\t\t\tfigureElement.appendChild(imgElement);\n\t\t\t\t}\n\t\n\t\t\t\tslide.appendChild(figureElement);\n\t\t\t});\n\t\n\t\t\tgalleryInner.appendChild(slide);\n\t\t});\n\t\n\t\t// Ensure all slides are hidden initially\n\t\tconst slidesInGallery = galleryInner.querySelectorAll('.gallery-slide');\n\t\tslidesInGallery.forEach(slide => (slide.classList.add('hide-slide')));\n\t\n\t\t// Determine the starting slide index\n\t\tlet startIndex = 0;\n\t\t// if (clickedFigure && clickedFigure.closest('.index')) {\n\t\tif (clickedFigure) {\n\t\t\tconst clickedGallery = clickedFigure.dataset.gallery;\n\t\t\tstartIndex = slides.findIndex(slide =>\n\t\t\t\tArray.from(slide).some(figure => figure.dataset.gallery === clickedGallery)\n\t\t\t);\n\t\t\tif (startIndex === -1) startIndex = 0;\n\t\t} else {\n\t\t\tstartIndex = slides.findIndex(slide =>\n\t\t\t\tslide.some(figure => figure.dataset.projectSlug === projectSlug)\n\t\t\t);\n\t\t\tif (startIndex === -1) startIndex = 0;\n\t\t}\n\t\n\t\t// Show the starting slide\n\t\tif (slidesInGallery[startIndex]) {\n\t\t\tconst startingSlideTitle = slidesInGallery[startIndex].querySelector('figure').dataset.title;\n\t\t\tconst pageTitle = document.querySelector('.page-title');\n\t\t\tif (startingSlideTitle && pageTitle) {\n\t\t\t\tpageTitle.textContent = startingSlideTitle;\n\t\t\t}\n\t\n\t\t\tslidesInGallery[startIndex].classList.remove('hide-slide');\n\n\t\t\tthis.loadMedia(slidesInGallery[startIndex]);\n\t\t\tthis.loadAdjacentSlides(slidesInGallery[startIndex]);\n\t\n\t\t\t// Synchronize currentIndex with the starting slide\n\t\t\tthis.currentIndex = startIndex;\n\n\t\t\tconst currentFigures = slidesInGallery[startIndex].querySelectorAll('figure');\n\t\t\tcurrentFigures.forEach(figure => {\n\t\t\t\t\n\n\t\t\t\tif (this.isSafari) {\n\t\t\t\t\tthis.setGalleryFigureWidthSafari(figure);\n\n\t\t\t\t\tif (figure.querySelector('video')) {\n\t\t\t\t\t\tconst loadedVideo = figure.querySelector('video');\n\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.setVideoDimensions(loadedVideo);\n\t\t\t\t\t\t}, 100);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t\n\n\t\t\t\t// if (this.isSafari) {\n\t\t\t\t// \tthis.setGalleryFigureWidthSafari(figure);\n\t\t\t\t// }\n\t\t\t});\n\t\t}\n\n\t\t// Show the total number of slides\n\t\tif (slidesInGallery[startIndex]) {\n\t\t\tconst startingSlideTitle = slidesInGallery[startIndex].querySelector('figure').dataset.title;\n\t\t\tconst pageTitle = document.querySelector('.page-title');\n\t\t\tif (startingSlideTitle && pageTitle) {\n\t\t\t\tpageTitle.textContent = startingSlideTitle;\n\t\t\t}\n\t\t\n\t\t\tslidesInGallery[startIndex].classList.remove('hide-slide');\n\t\t\n\t\t\tthis.loadMedia(slidesInGallery[startIndex]);\n\t\t\tthis.loadAdjacentSlides(slidesInGallery[startIndex]);\n\t\t\n\t\t\t// Synchronize currentIndex with the starting slide\n\t\t\tthis.currentIndex = startIndex;\n\t\t\n\t\t\t// Update the gallery-index\n\t\t\tconst currentSlide = slides[startIndex];\n\t\t\tconst currentProjectSlug = currentSlide[0].dataset.projectSlug;\n\t\t\tconst projectSlides = slides.filter(slide =>\n\t\t\t\tslide.some(figure => figure.dataset.projectSlug === currentProjectSlug)\n\t\t\t);\n\t\t\tconst projectIndex = String(projectSlides.indexOf(currentSlide) + 1).padStart(2, '0'); // Ensures 2 digits\n\t\t\tconst projectTotal = String(projectSlides.length).padStart(2, '0'); // Ensures 2 digits\n\t\t\n\t\t\tconst galleryIndexElement = document.querySelector('.project-index');\n\t\t\tif (galleryIndexElement) {\n\t\t\t\tgalleryIndexElement.textContent = `${projectIndex} | ${projectTotal}`;\n\t\t\t}\n\t\t}\n\t}\n\n\tinitializeHiddenGallery() {\n\n\t\tconst firstSlide = document.querySelector('.gallery .gallery-slide:first-child');\n\t\t\n\t\tthis.loadAdjacentSlides(document.querySelector('.gallery .gallery-slide:first-child'));\n\n\t\tconst currentFigures = firstSlide.querySelectorAll('figure');\n\t\tcurrentFigures.forEach(figure => {\n\n\t\t\tif (this.isSafari) {\n\t\t\t\tthis.setGalleryFigureWidthSafari(figure);\n\n\t\t\t\tif (figure.querySelector('video')) {\n\t\t\t\t\tconst loadedVideo = figure.querySelector('video');\n\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tthis.setVideoDimensions(loadedVideo);\n\t\t\t\t\t}, 100);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t\n\n\t\t\t\n\t\t});\n\t}\n\n\tstartVideos(videos) {\n\n\t\tvideos.forEach(video => {\n\t\t\tvideo.play();\n\t\t});\n\n\t}\n\n\tstopVideos(videos) {\n\t\t\n\t\tvideos.forEach(video => {\n\t\t\tvideo.pause();\n\t\t});\n\n\t}\n\n\tloadAdjacentSlides(currentSlide) {\n\t\tconst slides = Array.from(document.querySelectorAll('.gallery-slide'));\n\t\tconst currentIndex = slides.findIndex(slide => slide === currentSlide);\n\t\tconst totalSlides = slides.length;\n\t\n\t\t// Calculate indices for two before and two after with looping\n\t\tconst indicesToLoad = [\n\t\t\t(currentIndex - 2 + totalSlides) % totalSlides,\n\t\t\t(currentIndex - 1 + totalSlides) % totalSlides,\n\t\t\tcurrentIndex,\n\t\t\t(currentIndex + 1) % totalSlides,\n\t\t\t(currentIndex + 2) % totalSlides,\n\t\t];\n\t\n\t\t// Load media for the required slides\n\t\tindicesToLoad.forEach(index => {\n\t\t\tthis.loadMedia(slides[index]);\n\t\t});\n\t\n\t\t// Stop all videos except for those on the current slide\n\t\tslides.forEach((slide, index) => {\n\t\t\tconst videos = slide.querySelectorAll('video');\n\t\t\tif (index === currentIndex) {\n\t\t\t\t// Start videos for the current slide\n\t\t\t\t// if the video has attr autoplay\n\t\t\t\tvideos.forEach(video => {\n\t\t\t\t\tif(video.hasAttribute('autoplay')) {\n\t\t\t\t\t\tvideo.play();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t// this.startVideos(videos);\n\t\t\t} else {\n\t\t\t\t// Stop videos for other slides\n\t\t\t\tthis.stopVideos(videos);\n\t\t\t}\n\t\t});\n\t}\n\n\tcheckWebPSupport() {\n\t\tconst canvas = document.createElement('canvas');\n\t\treturn canvas.getContext && canvas.getContext('2d')\n\t\t\t? canvas.toDataURL('image/webp').indexOf('data:image/webp') === 0\n\t\t\t: false;\n\t}\n\n\tloadMedia(container) {\n\n\t\tif (!container) {\n\t\t\tconsole.error('Container element not found');\n\t\t\treturn;\n\t\t}\n\n\t\t\n\t\tconst figures = container.querySelectorAll('figure:not(.loaded):not(.loading)');\n\t\tif (!figures.length) return;\n\t\n\t\n\t\tfigures.forEach(figure => {\n\t\t\tfigure.classList.add('loading'); // Add loading class\n\t\n\t\t\tconst video = figure.querySelector('video[data-src]');\n\t\t\tconst img = figure.querySelector('img[data-src]');\n\t\n\t\t\tconst mediaElements = [];\n\t\t\tif (video) {\n\t\t\t\tvideo.src = video.dataset.src;\n\t\n\t\t\t\t// if (isSafari) {\n\t\t\t\t// \tvideo.addEventListener('loadeddata', () => {\n\t\t\t\t// \t\tvideo.currentTime = 1; // Set to first frame in Safari\n\t\t\t\t// \t}, { once: true });\n\t\t\t\t// }\n\t\t\t\tmediaElements.push(video);\n\t\t\t}\n\t\t\tif (img) {\n\t\t\t\t// Use data-src for WebP if supported, otherwise data-srcjpeg\n\t\t\t\timg.src = this.checkWebPSupport ? img.dataset.src : img.dataset.srcjpeg;\n\t\t\t\tmediaElements.push(img);\n\t\t\t}\n\t\n\t\t\t// Wait for all media to load\n\t\t\tPromise.all(mediaElements.map(media => new Promise(resolve => {\n\t\t\t\tif (media.tagName === 'VIDEO') {\n\t\t\t\t\tmedia.onloadeddata = resolve;\n\t\t\t\t} else {\n\t\t\t\t\tmedia.onload = resolve;\n\t\t\t\t}\n\t\t\t\tmedia.onerror = resolve; // Handle errors gracefully\n\t\t\t}))).then(() => {\n\t\t\t\tfigure.classList.remove('loading');\n\t\t\t\tfigure.classList.add('previously-loaded');\n\t\t\t\tfigure.classList.add('loaded');\n\t\t\t\n\t\t\t});\n\t\t});\n\t}\n\n\tsetVideoDimensions(video) {\n\t\trequestAnimationFrame(() => {\n\t\t\tconst containerWidth = video.parentElement.clientWidth; // Width of the parent container\n\t\t\tconst containerHeight = video.parentElement.clientHeight; // Height of the parent container\n\t\t\tconst intrinsicWidth = parseInt(video.getAttribute('width')); // Intrinsic width of the video\n\t\t\tconst intrinsicHeight = parseInt(video.getAttribute('height')); // Intrinsic height of the video\n\t\n\t\t\tif (!intrinsicWidth || !intrinsicHeight) return; // Fail-safe if intrinsic dimensions are unavailable\n\t\n\t\t\t// Calculate effective dimensions based on object-fit: contain\n\t\t\tconst widthRatio = containerWidth / intrinsicWidth;\n\t\t\tconst heightRatio = containerHeight / intrinsicHeight;\n\t\t\tconst scale = Math.min(widthRatio, heightRatio); // Scale to fit within container\n\t\n\t\t\tconst finalWidth = Math.round(intrinsicWidth * scale); // Final rendered width\n\t\t\tconst finalHeight = Math.round(intrinsicHeight * scale); // Final rendered height\n\t\n\t\t\t// Set the video element's width and height attributes to match its rendered size\n\t\t\tvideo.style.width = `${finalWidth}px`;\n\t\t\tvideo.style.height = `${finalHeight}px`;\n\t\n\t\t});\n\t}\n\n\tsetGalleryFigureWidthSafari(figure) {\n\t\t// if (!figure.dataset.isDiptych) return;\n\t\tif (figure.dataset.isDiptych !== \"true\") return;\n\t\n\t\tconst media = figure.querySelector('img, video');\n\t\tif (!media) return;\n\t\n\t\t// const containerWidth = figure.clientWidth;\n\t\tconst containerWidth = this.isMobile ? (window.innerWidth - 40)/2 : (window.innerWidth - 180)/2;\n\t\t// const containerHeight = figure.clientHeight;\n\t\tconst containerHeight = this.isMobile ? (window.innerHeight - 100) : (window.innerHeight - 190);\n\n\t\tconst intrinsicWidth = parseInt(media.getAttribute('width')); // Intrinsic width\n\t\tconst intrinsicHeight = parseInt(media.getAttribute('height')); // Intrinsic height\n\n\t\t// console.log(containerWidth, containerHeight, intrinsicWidth, intrinsicHeight);\n\n\n\t\tif (!intrinsicWidth || !intrinsicHeight) return; // Fail-safe if intrinsic dimensions are unavailable\n\n\t\t// Calculate effective dimensions based on object-fit: contain\n\t\tconst widthRatio = containerWidth / intrinsicWidth;\n\t\tconst heightRatio = containerHeight / intrinsicHeight;\n\t\tconst scale = Math.min(widthRatio, heightRatio); // Scale to fit within container\n\n\t\tconst finalWidth = intrinsicWidth * scale; // Final rendered width\n\t\tfigure.style.width = `${finalWidth}px`;\n\n\t\t// Check and adjust the next sibling figure if it also has data-is-diptych\n\t\tconst nextFigure = figure.nextElementSibling;\n\t\tif (nextFigure) {\n\t\t\tconst nextMedia = nextFigure.querySelector('img, video');\n\t\t\tif (nextMedia) {\n\t\t\t\tconst nextIntrinsicWidth = parseInt(nextMedia.getAttribute('width'));\n\t\t\t\tconst nextIntrinsicHeight = parseInt(nextMedia.getAttribute('height'));\n\n\t\t\t\tconst nextWidthRatio = containerWidth / nextIntrinsicWidth;\n\t\t\t\tconst nextHeightRatio = containerHeight / nextIntrinsicHeight;\n\t\t\t\tconst nextScale = Math.min(nextWidthRatio, nextHeightRatio);\n\n\t\t\t\tconst nextFinalWidth = nextIntrinsicWidth * nextScale;\n\t\t\t\tnextFigure.style.width = `${nextFinalWidth}px`;\n\t\t\t}\n\t\t}\n\t}\n\n}","import home from 'modules/home';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    new home();\n});\n"],"mappings":"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","ignoreList":[]}
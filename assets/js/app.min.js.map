{"version":3,"names":["Home","constructor","this","state","basePath","document","body","getAttribute","URL","window","location","origin","pathname","supportsWebP","checkWebPSupport","isSafari","navigator","userAgent","indexOf","initialRoute","currentIndex","pageTransitionTime","matchMedia","matches","scale","scrollSpeed","draggableInstance","handleMouseWheel","bind","updateBounds","handleMouseMove","querySelector","classList","add","fullPath","relativePath","startsWith","slice","length","endsWith","initialState","path","filter","split","project","href","history","replaceState","initializeRouter","handleStateChange","isMobile","isTouch","maxTouchPoints","msMaxTouchPoints","addEventListener","event","navigate","url","arguments","undefined","fullUrl","pushState","error","console","setState","closeIndex","closeProject","closeAbout","showFeatured","closeFeatured","showFilter","showIndex","showProject","showAbout","additionalData","JSON","stringify","setActiveButton","activeButton","querySelectorAll","forEach","button","remove","timeout","initializePage","setTimeout","figure","Math","random","initializeCanvas","loadMedia","showAdditionalMenu","scrollTo","categories","dataset","includes","projectSlug","clickedFigure","allFigures","initializeGallery","contains","initializeHiddenGallery","checkForCaption","hideAdditionalMenu","innerHTML","menu","style","width","fullWidth","offsetWidth","gsap","to","duration","ease","onComplete","menuButtons","opacity","stagger","initializeMobileEvents","closeMobileMenus","dispatchEvent","Event","bubbles","registerPlugin","Draggable","InertiaPlugin","config","nullTargetWarn","initializeFeaturedLayout","initializeObserver","initializeNavigation","observer","IntersectionObserver","entries","entry","isIntersecting","target","root","threshold","item","observe","calculateBounds","container","minX","innerWidth","minY","offsetHeight","innerHeight","maxX","maxY","currentX","getProperty","currentY","newX","deltaX","newY","deltaY","bounds","utils","clamp","x","y","onUpdate","update","applyBounds","e","containerInner","closest","mouseX","clientX","mouseY","clientY","nudgeAmountX","nudgeAmountY","kill","removeEventListener","create","type","edgeResistance","inertia","throwProps","throwResistance","maxDuration","minDuration","onDrag","onThrowUpdate","viewportWidth","viewportHeight","initialX","initialY","set","targetScale","items","img","link","imgWidth","parseInt","attributes","value","imgHeight","height","ratio","randomSizeLongEdge","floor","itemWidth","itemHeight","concat","padding","parallax","toFixed","featuredContainer","Packery","itemSelector","resize","setNavigationListeners","initializeNavEvents","initializeProjectsEvents","initializeGalleryEvents","preventDefault","navTimeout","nav","clearTimeout","projectLinks","pageTitle","hoverTimeout","preventInteraction","title","textContent","parentContainer","otherFigure","prevButton","nextButton","closeButton","galleryInner","updateGallery","direction","slides","Array","from","slide","loadAdjacentSlides","currentSlide","setGalleryFigureWidthSafari","loadedVideo","setVideoDimensions","currentSlideFirstFigure","currentSlideTitle","timeline","currentProjectSlug","projectSlides","projectIndex","toString","padStart","projectTotal","galleryIndexElement","newSlug","currentActiveSlug","newUrl","tagName","toLowerCase","clickX","screenWidth","hammer","Hammer","on","back","key","activeSlide","figures","hiddenCaption","caption","display","activeFigures","activeFiguresArray","processedIndices","Set","index","has","isDiptych","nextFigure","sameProject","push","slideFigures","createElement","figureElement","Object","client","projectUrl","gallery","galleryjpeg","galleryWidth","galleryHeight","videoUrl","isPortrait","autoplay","_ref","camelCase","kebabCase","setAttribute","isVideo","mediaUrl","mediaWidth","mediaHeight","videoElement","src","poster","loop","playsInline","preload","muted","controls","controlsList","aspectRatio","appendChild","imgElement","srcjpeg","slidesInGallery","startIndex","clickedGallery","findIndex","some","startingSlideTitle","String","firstSlide","startVideos","videos","video","play","stopVideos","pause","totalSlides","hasAttribute","canvas","getContext","toDataURL","mediaElements","Promise","all","map","media","resolve","onloadeddata","onload","onerror","then","requestAnimationFrame","containerWidth","parentElement","clientWidth","containerHeight","clientHeight","intrinsicWidth","intrinsicHeight","widthRatio","heightRatio","min","finalWidth","round","finalHeight","nextElementSibling","nextMedia","nextIntrinsicWidth","nextWidthRatio","nextHeightRatio","nextFinalWidth","home"],"sources":["modules/home.js","app.js"],"sourcesContent":["export default class Home {\n\tconstructor() {\n\t\tthis.state = null; // Current app state\n\t\tthis.basePath = document.body.getAttribute(\"data-basepath\") === \"https://paulcalver.co\" || document.body.getAttribute(\"data-basepath\") === \"https://paulcalver.cc\" ? document.body.getAttribute(\"data-basepath\") : new URL(document.body.getAttribute(\"data-basepath\") || window.location.origin).pathname; // Extract the path portion of the base URL\n\n\t\t// this.basePath = document.body.getAttribute(\"data-basepath\"); // Extract the path portion of the base URL\n\n\t\tthis.supportsWebP = this.checkWebPSupport();\n\n\t\tthis.isSafari = navigator.userAgent.indexOf('Safari') != -1 && navigator.userAgent.indexOf('Chrome') == -1;\n\n\n\t\tthis.initialRoute = true;\n\t\tthis.currentIndex = 0; // Initialize the currentIndex at 0\n\t\tthis.pageTransitionTime = window.matchMedia(\"(max-width: 768px)\").matches ? 10 : 500; // Duration of the page transition animation\n\n\t\tthis.scale = 1; // Default scale\n        this.scrollSpeed = 3; // Global scroll sensitivity\n        this.draggableInstance = null;\n\n        // Bind event listeners to ensure they can be properly added/removed\n        this.handleMouseWheel = this.handleMouseWheel.bind(this);\n        this.updateBounds = this.updateBounds.bind(this);\n        this.handleMouseMove = this.handleMouseMove.bind(this);\n\n\n\t\tif (navigator.userAgent.indexOf('Safari') != -1 && navigator.userAgent.indexOf('Chrome') == -1) {\n\t\t\tdocument.querySelector('html').classList.add('is-safari');\n\t\t}\n\t\t\n\t\t// Determine initial state based on the current URL\n\t\tconst fullPath = window.location.pathname;\n\t\tlet relativePath = fullPath.startsWith(this.basePath)\n\t\t\t? fullPath.slice(this.basePath.length)\n\t\t\t: fullPath;\n\t\t\n\t\t// Remove trailing slash if present (except for root \"/\")\n\t\trelativePath = relativePath.endsWith(\"/\") && relativePath !== \"/\"\n\t\t\t? relativePath.slice(0, -1)\n\t\t\t: relativePath;\n\t\t\n\t\t// Prepare initial state data\n\t\tlet initialState = { path: relativePath };\n\t\tif (relativePath === \"/\" || relativePath === \"\") {\n\t\t\tinitialState = { state: \"featured\" };\n\t\t} else if (relativePath.startsWith(\"/filter/\")) {\n\t\t\tconst filter = relativePath.split(\"/filter/\")[1];\n\t\t\tinitialState = { state: \"filter\", filter };\n\t\t} else if (relativePath === \"/projects\") {\n\t\t\tinitialState = { state: \"index\" };\n\t\t} else if (relativePath.startsWith(\"/projects/\")) {\n\t\t\tconst project = relativePath.split(\"/projects/\")[1];\n\t\t\t// console.log(project);\n\t\t\tinitialState = { state: \"project\", project };\n\t\t} else if (relativePath === \"/about\") {\n\t\t\tinitialState = { state: \"about\" };\n\t\t} else {\n\t\t\twindow.location.href = this.basePath; // Redirect to basePath for unknown routes\n\t\t}\n\n\t\t// Set the initial state in history\n\t\thistory.replaceState(initialState, \"\", window.location.href);\n\n\t\tthis.initializeRouter();\n\t\tthis.handleStateChange();\n\t}\n\n\tisMobile() {\n\t\treturn window.matchMedia(\"(max-width: 768px)\").matches;\n\t}\n\n\tisTouch() {\n\t\treturn 'ontouchstart' in window || navigator.maxTouchPoints > 0 || navigator.msMaxTouchPoints > 0;\n\t}\n\n\tinitializeRouter() {\n\t\twindow.addEventListener(\"popstate\", (event) => {\n\t\t\tthis.handleStateChange();\n\t\t\t// console.log(\"Popstate triggered with state:\", event.state);\n\t\t});\n\t}\n\n\tnavigate(url, state = {}) {\n\t\ttry {\n\t\t\tconst fullUrl = this.basePath + url;\n\t\t\t// console.log(fullUrl, this.basePath, url);\n\t\t\thistory.pushState(state, \"\", fullUrl);\n\n\t\t\t// Trigger `handleStateChange` only if not on the initial route\n\t\t\tif (!this.initialRoute) {\n\t\t\t\tthis.handleStateChange();\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error(\"Failed to navigate:\", error);\n\t\t}\n\t}\n\n\thandleStateChange() {\n\t\tconst fullPath = window.location.pathname;\n\n\t\t// Strip the base path from the current pathname\n\t\tlet relativePath = fullPath.startsWith(this.basePath)\n\t\t\t? fullPath.slice(this.basePath.length)\n\t\t\t: fullPath;\n\n\t\trelativePath = relativePath.endsWith(\"/\") && relativePath !== \"/\"\n\t\t? relativePath.slice(0, -1)\n\t\t: relativePath;\n\t\t\t\n\n\t\tif (relativePath === \"/\" || relativePath === \"\") {\n\t\t\tthis.setState(\"featured\");\n\t\t\tif(!this.initialRoute) {\n\t\t\t\tthis.closeIndex();\n\t\t\t\tthis.closeProject();\n\t\t\t\tthis.closeAbout();\n\t\t\t}\n\t\t\tthis.showFeatured(this.initialRoute); // Only call `showHome` here\n\t\t} else if (relativePath.startsWith(\"/filter/\")) {\n\t\t\tconst filter = relativePath.split(\"/filter/\")[1];\n\t\t\tthis.setState(\"filter\", { filter });\n\t\t\tif(!this.initialRoute) {\n\t\t\t\tthis.closeFeatured();\n\t\t\t\tthis.closeProject();\n\t\t\t\tthis.closeAbout();\n\t\t\t}\n\t\t\tthis.showFilter(filter, this.initialRoute); // Only call `showFilter` here\n\t\t} else if (relativePath === \"/projects\") {\n\t\t\tthis.setState(\"index\");\n\t\t\tif(!this.initialRoute) {\n\t\t\t\tthis.closeFeatured();\n\t\t\t\tthis.closeProject();\n\t\t\t\tthis.closeAbout();\n\t\t\t}\n\t\t\tthis.showIndex(this.initialRoute); // Only call `showProjects` here\n\t\t} else if (relativePath.startsWith(\"/projects/\")) {\n\t\t\tconst project = relativePath.split(\"/projects/\")[1];\n\t\t\tthis.setState(\"project\", { project });\n\t\t\tif(!this.initialRoute) {\n\t\t\t\tthis.closeFeatured();\n\t\t\t\tthis.closeIndex();\n\t\t\t\tthis.closeAbout();\n\t\t\t}\n\t\t\tthis.showProject(project, null, null, this.initialRoute); // Pass no clicked item\n\t\t} else if (relativePath === \"/about\") {\n\t\t\tthis.setState(\"about\");\n\t\t\tif(!this.initialRoute) {\n\t\t\t\tthis.closeFeatured();\n\t\t\t\tthis.closeIndex();\n\t\t\t\tthis.closeProject();\n\t\t\t}\n\t\t\tthis.showAbout(this.initialRoute); // Only call `showAbout` here\n\t\t} else {\n\t\t\tconsole.error(\"Unknown state for relative path:\", relativePath);\n\t\t}\n\n\n\t\t// Set initialRoute to false after the first run\n\t\tif (this.initialRoute) {\n\t\t\tthis.initialRoute = false;\n\t\t\t// console.log(\"Initial route setup complete\");\n\t\t}\n\t}\n\n\tsetState(state, additionalData = null) {\n\t\tif (this.state === state && JSON.stringify(this.additionalData) === JSON.stringify(additionalData)) {\n\t\t\treturn; // Avoid redundant updates\n\t\t}\n\n\t\tthis.state = state;\n\t\tthis.additionalData = additionalData;\n\n\t\t// Log state changes for debugging\n\t\t// console.log(\"State updated:\", state, additionalData);\n\t}\n\n\tsetActiveButton(activeButton) {\n\t\tconst buttons = document.querySelectorAll('.menu a');\n\t\tbuttons.forEach(button => button.classList.remove('active-button'));\n\t\tactiveButton.classList.add('active-button');\n\t}\n\n\n    // Methods to handle visuals for each state\n    showFeatured(initialRoute = false) {\n\t\tlet timeout = initialRoute ? 0 : this.pageTransitionTime;\n\n\t\tif (initialRoute) {\n\t\t\t// console.log(\"Initial route detected\");\n\n\n\t\t\tthis.initializePage();\n\n\n\t\t\t\n\t\t} else {\n\n\t\t\t\n\t\t}\n\n\t\tdocument.querySelector('.featured').classList.add('active-section');\n\t\tdocument.body.classList.add('featured-active');\n\t\tthis.setActiveButton(document.querySelector('.featured-link'));\n\n\t\t\n\n\n\t\tsetTimeout(() => {\n\n\n\t\t\tdocument.querySelectorAll('.featured figure').forEach(figure => {\n\t\t\t\tfigure.classList.remove('hide');\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tfigure.classList.remove('unfiltered-figure');\n\t\t\t\t}, 10);\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tfigure.classList.remove('stagger');\n\t\t\t\t}, Math.random() * 1200);\n\t\t\t});\n\n\t\t\tif(!this.isMobile()) {\n\t\t\t\tthis.initializeCanvas(document.querySelector('.featured-items'), initialRoute);\n\t\t\t}\n\n\n\t\t\tthis.loadMedia(document.querySelector('.featured'));\n\t\t}, timeout);\n\n    }\n\n\tshowIndex(initialRoute = false) {\n\t\tlet timeout = initialRoute ? 0 : this.pageTransitionTime;\n\t\tif (initialRoute) {\n\t\t\t// console.log(\"Initial route detected\");\n\n\n\t\t\tthis.initializePage();\n\n\t\t\t\n\t\t} else {\n\n\t\t\t\n\t\t}\n\t\t\n\t\t// setTimeout(() => {\n\t\tif(!this.isMobile()) {\n\t\t\tthis.showAdditionalMenu(document.querySelector('.filters'));\n\t\t}\n\t\t// }, 1000);\n\n\t\tdocument.querySelector('.index').classList.add('active-section');\n\t\tdocument.body.classList.add('index-active');\n\t\tthis.setActiveButton(document.querySelector('.index-link'));\n\n\t\tdocument.querySelectorAll('.index figure').forEach(figure => {\n\t\t\tfigure.classList.add('unfiltered-figure');\n\t\t\tfigure.classList.add('stagger');\n\t\t});\n\n\n\n\t\tsetTimeout(() => {\n\n\t\t\tdocument.querySelectorAll('.index figure').forEach(figure => {\n\t\t\t\tfigure.classList.add('hide');\n\t\t\t\tfigure.classList.remove('hide');\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tfigure.classList.remove('unfiltered-figure');\n\t\t\t\t}, 10);\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tfigure.classList.remove('stagger');\n\t\t\t\t}, Math.random() * 1200);\n\t\t\t});\n\n\t\t\tif(!this.isMobile()) {\n\t\t\t\tthis.initializeCanvas(document.querySelector('.index-items'));\n\t\t\t}\n\n\t\t\tthis.loadMedia(document.querySelector('.index'));\n\t\t}, timeout);\n\n    }\n\n    showFilter(filter, initialRoute = false) {\n\t\tlet timeout = initialRoute ? 0 : this.pageTransitionTime;\n\t\tif (initialRoute) {\n\t\t\t// console.log(\"Initial route detected\");\n\n\n\t\t\tthis.initializePage();\n\n\t\t\t\n\t\t} else {\n\n\t\t\t\n\t\t}\n\n\t\t// setTimeout(() => {\n\t\tif(!this.isMobile()) {\n\t\t\tthis.showAdditionalMenu(document.querySelector('.filters'));\n\t\t}\n\t\t// }, 1000);\n\n        document.querySelector('.index').classList.add('active-section');\n\t\tdocument.body.classList.add('index-active');\n\t\tthis.setActiveButton(document.querySelector('.filter-button[data-filter=\"' + filter + '\"]'));\n\n\t\tdocument.querySelectorAll('.index figure').forEach(figure => {\n\t\t\tfigure.classList.add('unfiltered-figure');\n\t\t\tfigure.classList.add('stagger');\n\t\t});\n\n\t\t\n\t\t\n\t\tsetTimeout(() => {\n\n\t\t\tif(this.isMobile()) {\n\n\t\t\t\tdocument.querySelector('.index').scrollTo(0, 0);\n\n\t\t\t}\n\n\t\t\tdocument.querySelectorAll('.index figure').forEach(figure => {\n\n\t\t\t\tfigure.classList.add('hide');\n\n\t\t\t\tconst categories = figure.dataset.categories ? figure.dataset.categories.split(',') : [];\n\t\t\t\tconst shouldShow = !filter || categories.includes(filter);\n\t\n\t\t\t\tif (shouldShow) {\n\t\t\t\t\tfigure.classList.remove('hide');\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tfigure.classList.remove('unfiltered-figure');\n\t\t\t\t\t}, 10);\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tfigure.classList.remove('stagger');\n\t\t\t\t\t}, Math.random() * 300);\n\t\t\t\t} \n\t\t\t});\n\n\t\t\tif(!this.isMobile()) {\n\t\t\t\tthis.initializeCanvas(document.querySelector('.index-items'));\n\t\t\t}\n\n\n\t\t\tthis.loadMedia(document.querySelector('.index'));\n\t\t}, timeout);\n\t\t\n    }\n\n    showProject(projectSlug, clickedFigure = null, allFigures = null, initialRoute = false) {\n\t\tlet timeout = initialRoute ? 0 : this.pageTransitionTime;\n\t\tif (initialRoute) {\n\t\t\t// console.log(\"Initial route detected\");\n\n\t\t\tthis.initializePage(initialRoute);\n\t\t\t\n\t\t} else {\n\n\t\t\t\n\t\t}\n\n\t\t\n\n\t\tsetTimeout(() => {\n\t\t\tconst gallery = document.querySelector('.gallery');\n\t\t\tgallery.classList.add('active-section');\n\t\t\tthis.initializeGallery(projectSlug, clickedFigure, allFigures, initialRoute);\n\t\t\tif(!document.body.classList.contains('hidden-page')) {\n\t\t\t\t// this.initializeGallery(projectSlug, clickedFigure, allFigures, initialRoute);\n\t\t\t} else {\n\t\t\t\tthis.initializeHiddenGallery();\n\t\t\t\tthis.checkForCaption();\n\t\t\t}\n\t\t\tdocument.body.classList.add('gallery-active');\n\t\t}, timeout);\n\t}\n\n    showAbout(initialRoute = false) {\n\t\tlet timeout = initialRoute ? 0 : this.pageTransitionTime;\n\t\tif (initialRoute) {\n\t\t\t// console.log(\"Initial route detected\");\n\n\t\t\tthis.initializePage();\n\t\t\t\n\t\t} else {\n\n\t\t\t\n\t\t}\n\n\t\t// setTimeout(() => {\n\t\tif(!this.isMobile()) {\n\t\t\tthis.showAdditionalMenu(document.querySelector('.external-links'));\n\t\t}\n\t\t// }, 1000);\n\n\t\tsetTimeout(() => {\n\t\t\tdocument.querySelector('.about').classList.add('active-section');\n\t\t\tdocument.body.classList.add('about-active');\n\t\t\tthis.setActiveButton(document.querySelector('.about-link'));\n\t\t}, timeout);\n\n\n    }\n\n\t\n\n\tcloseFeatured() {\n\t\t// console.log('close featured');\n\t\t\n\n\t\tsetTimeout(() => {\n\t\t\tdocument.querySelector('.featured').classList.remove('active-section');\n\t\t\tdocument.body.classList.remove('featured-active');\n\t\t}, this.pageTransitionTime);\n\n\t\tdocument.querySelectorAll('.featured figure').forEach(figure => {\n\t\t\tfigure.classList.add('unfiltered-figure');\n\t\t\tfigure.classList.add('stagger');\n\t\t\tsetTimeout(() => {\n\t\t\t\tfigure.classList.add('hide');\n\t\t\t}, this.pageTransitionTime);\n\t\t});\n\t}\n\n\tcloseIndex() {\n\t\t// console.log('close projects');\n\n\t\tsetTimeout(() => {\n\t\t\tdocument.querySelector('.index').classList.remove('active-section');\n\t\t\tdocument.body.classList.remove('index-active');\n\t\t}, this.pageTransitionTime);\n\n\t\t// setTimeout(() => {\n\t\t\tif(!this.isMobile()) {\n\t\t\t\tthis.hideAdditionalMenu(document.querySelector('.filters'));\n\t\t\t}\n\t\t// }, 1000);\n\n\t\tdocument.querySelectorAll('.index figure').forEach(figure => {\n\t\t\tfigure.classList.add('unfiltered-figure');\n\t\t\tfigure.classList.add('stagger');\n\t\t\tsetTimeout(() => {\n\t\t\t\tfigure.classList.add('hide');\n\t\t\t}, this.pageTransitionTime);\n\t\t});\n\t}\n\n\tcloseProject() {\n\t\tdocument.querySelector('.gallery').classList.remove('active-section');\n\t\tdocument.body.classList.remove('gallery-active');\n\t\tsetTimeout(() => {\n\t\t\tdocument.querySelector('.gallery-inner').innerHTML = '';\n\t\t}, this.pageTransitionTime);\n\t}\n\n\tcloseAbout() {\n\t\tdocument.querySelector('.about').classList.remove('active-section');\n\t\tdocument.body.classList.remove('about-active');\n\n\t\t// setTimeout(() => {\n\t\tif(!this.isMobile()) {\n\t\t\tthis.hideAdditionalMenu(document.querySelector('.external-links'));\n\t\t}\n\t\t// }, 1000);\n\t}\n\n\tshowAdditionalMenu(menu) {\n\t\tif (!menu || menu.style.width === 'auto') return;\n\t\tmenu.style.width = 'auto';\n\t\tconst fullWidth = menu.offsetWidth;\n\n\t\t// Reset width to 0 to prepare for animation\n\t\tmenu.style.width = '0';\n\n\t\t// Animate the width using GSAP\n\t\tgsap.to(menu, {\n\t\t\twidth: fullWidth,\n\t\t\tduration: 0.5,\n\t\t\tease: 'power4.out',\n\t\t\tonComplete: () => {\n\t\t\t\t// Optional: Clean up inline styles if necessary\n\t\t\t\tmenu.style.width = 'auto';\n\n\t\t\t\tconst menuButtons = menu.querySelectorAll('a');\n\t\t\t\tgsap.to(menuButtons, {\n\t\t\t\t\topacity: 1,\n\t\t\t\t\tduration: 0.5,\n\t\t\t\t\tstagger: 0.1, // Stagger animation for each button\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\thideAdditionalMenu(menu) {\n\t\tif (!menu) return;\n\t\tconst menuButtons = menu.querySelectorAll('a');\n\n\t\tgsap.to(menuButtons, {\n\t\t\topacity: 0,\n\t\t\tduration: 0.5,\n\t\t\tstagger: -0.1, // Stagger animation for each button\n\t\t\tonComplete: () => {\n\t\t\t\tgsap.to(menu, {\n\t\t\t\t\twidth: 0,\n\t\t\t\t\tduration: 0.5,\n\t\t\t\t\tease: 'power4.out',\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tinitializeMobileEvents(){\n\t\tdocument.querySelector('.mobile-button-filters').addEventListener('click', () => {\n\t\t\tdocument.body.classList.add('mobile-filters-open');\n\t\t});\n\n\t\tdocument.querySelector('.mobile-button-menu').addEventListener('click', () => {\n\t\t\tdocument.body.classList.add('mobile-menu-open');\n\t\t});\n\n\t\tdocument.querySelector('.mobile-button-close').addEventListener('click', () => {\n\t\t\tthis.closeMobileMenus();\n\t\t});\n\t}\n\n\tcloseMobileMenus() {\n\t\tif(document.body.classList.contains('gallery-active')) {\n\t\t\tconst closeButton = document.querySelector('.project-controls .close');\n\t\t\tcloseButton.dispatchEvent(new Event('click', { bubbles: true }));\n\t\t} else {\n\t\t\tdocument.body.classList.remove('mobile-menu-open');\n\t\t\tdocument.body.classList.remove('mobile-filters-open');\n\t\t}\n\t}\n\n\tinitializePage(initialRoute = false) {\n\n\t\tgsap.registerPlugin(Draggable, InertiaPlugin);\n\t\tgsap.config({\n\t\t\tnullTargetWarn: false,\n\t\t});\n\n\t\tif(!this.isMobile()) {\n\t\t\tthis.initializeFeaturedLayout();\n\t\t\tthis.initializeObserver();\n\t\t} else {\n\t\t\tthis.initializeMobileEvents();\n\t\t}\n\n\t\tthis.initializeNavigation(initialRoute);\n\t}\n\n\tinitializeObserver() {\n\t\tconst observer = new IntersectionObserver((entries) => {\n\t\t\tentries.forEach(entry => {\n\t\t\t\tif (entry.isIntersecting) {\n\t\t\t\t\t// Image is in view, set opacity to 1 and scale to 1\n\t\t\t\t\tgsap.to(entry.target, { \n\t\t\t\t\t\topacity: 1, \n\t\t\t\t\t\tscale: 1,  // Scale to 1 when visible\n\t\t\t\t\t\tduration: 1,\n\t\t\t\t\t\tease: \"power2.out\"\n\t\t\t\t\t});\n\t\n\t\t\t\t} else {\n\t\t\t\t\t// Image is out of view, set opacity to 0.5 and scale to 0.75\n\t\t\t\t\tgsap.to(entry.target, { \n\t\t\t\t\t\topacity: 0.25, \n\t\t\t\t\t\tscale: 0.9,  // Scale down when not visible\n\t\t\t\t\t\tduration: 1,\n\t\t\t\t\t\tease: \"power2.out\"\n\t\t\t\t\t});\n\t\n\t\t\t\t}\n\t\t\t});\n\t\t}, {\n\t\t\troot: null,  // Track visibility relative to the viewport\n\t\t\tthreshold: 0.1 // Trigger when at least 10% of the image is visible\n\t\t});\n\n\t\tdocument.querySelectorAll('.index .project-link-inner, .featured .project-link-inner').forEach(item => {\n\t\t\tobserver.observe(item);\n\t\t});\n\t}\n\n\tcalculateBounds(container) {\n        const maxX = -container.offsetWidth * this.scale + window.innerWidth;\n        const maxY = -container.offsetHeight * this.scale + window.innerHeight;\n        return { minX: maxX, minY: maxY, maxX: 0, maxY: 0 };\n    }\n\n    handleMouseWheel(event) {\n        if (!this.draggableInstance) return;\n\n        const container = this.draggableInstance.target;\n        const currentX = gsap.getProperty(container, 'x');\n        const currentY = gsap.getProperty(container, 'y');\n\n        let newX = currentX - event.deltaX * this.scrollSpeed;\n        let newY = currentY - event.deltaY * this.scrollSpeed;\n\n        const bounds = this.calculateBounds(container);\n\n        newX = gsap.utils.clamp(bounds.minX, bounds.maxX, newX);\n        newY = gsap.utils.clamp(bounds.minY, bounds.maxY, newY);\n\n        gsap.to(container, {\n            x: newX,\n            y: newY,\n            duration: 0.3,\n            ease: \"power2.out\",\n\t\t\tonUpdate: () => this.draggableInstance.update(),\n    \t\tonComplete: () => this.draggableInstance.update(),\n        });\n\n\t\tthis.updateBounds();\n    }\n\n    updateBounds() {\n        if (this.draggableInstance) {\n            const container = this.draggableInstance.target;\n            this.draggableInstance.applyBounds(this.calculateBounds(container));\n        }\n    }\n\n    handleMouseMove(e) {\n        if (!this.draggableInstance) return;\n\n        const containerInner = this.draggableInstance.target.closest('.container-inner');\n        const maxNudge = 50;\n        const mouseX = e.clientX;\n        const mouseY = e.clientY;\n\n        const nudgeAmountX = ((mouseX / window.innerWidth) - 0.5) * maxNudge;\n        const nudgeAmountY = ((mouseY / window.innerHeight) - 0.5) * maxNudge;\n\n        gsap.to(containerInner, {\n            x: nudgeAmountX,\n            y: nudgeAmountY,\n            duration: 1.5,\n            ease: 'power3.out',\n        });\n    }\n\n    initializeCanvas(container, initialRoute = false) {\n        const containerInner = container.closest('.container-inner');\n\n        // Remove previous Draggable instance\n        if (this.draggableInstance) {\n            this.draggableInstance.kill();\n        }\n\n        // Remove existing event listeners\n        window.removeEventListener('wheel', this.handleMouseWheel);\n        window.removeEventListener('resize', this.updateBounds);\n        window.removeEventListener('mousemove', this.handleMouseMove);\n\n        this.draggableInstance = Draggable.create(container, {\n\t\t\ttype: \"x,y\",\n\t\t\tedgeResistance: 0.85,\n\t\t\tinertia: true,\n\t\t\tbounds: this.calculateBounds(container),\n\t\t\tthrowProps: true,\n\t\t\tthrowResistance: 20000,\n\t\t\tmaxDuration: 3,\n\t\t\tminDuration: 0.5,\n\t\t\tonDrag: () => {\n\t\t\t\tconst bounds = this.calculateBounds(container);\n\t\t\t\tgsap.utils.clamp(bounds.minX, bounds.maxX, gsap.getProperty(container, 'x'));\n\t\t\t\tgsap.utils.clamp(bounds.minY, bounds.maxY, gsap.getProperty(container, 'y'));\n\t\t\t},\n\t\t\tonThrowUpdate: () => {\n\t\t\t\tthis.updateBounds();\n\t\t\t}\n\t\t})[0];\n\n        // Add event listeners\n        window.addEventListener('wheel', this.handleMouseWheel);\n        window.addEventListener('resize', this.updateBounds);\n        window.addEventListener('mousemove', this.handleMouseMove);\n\n        // Center the container\n        const viewportWidth = window.innerWidth;\n        const viewportHeight = window.innerHeight;\n\n        const containerWidth = container.offsetWidth;\n        const containerHeight = container.offsetHeight;\n\n        const initialX = (viewportWidth - containerWidth) / 2;\n        const initialY = (viewportHeight - containerHeight) / 2;\n\n        gsap.set(container, {\n            x: initialX,\n            y: initialY,\n        });\n\n\t\tif(container.classList.contains('featured-items') && initialRoute) {\n\t\t\t// this.preventInteraction = true;\n\t\t\tconst targetScale = 0.7;\n\t\t\tgsap.to(container, {\n\t\t\t\tscale: targetScale,\n\t\t\t\tduration: 0,\n\t\t\t\tease: 'power3.out',\n\t\t\t\tonUpdate: this.updateBounds()\n\t\t\t});\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tconst animationDuration = 2; // Total duration of the animation in seconds\n\t\t\t\n\t\t\t\t// Scale animation\n\t\t\t\tgsap.to(container, {\n\t\t\t\t\tscale: 1,\n\t\t\t\t\tduration: animationDuration,\n\t\t\t\t\tease: 'power3.out',\n\t\t\t\t\tonUpdate: () => this.updateBounds(),\n\t\t\t\t});\n\n\t\t\t}, 50);\n\t\t};\n    }\n\n\t\n\t\n\n\tinitializeFeaturedLayout() {\n\t\tlet totalWidth = 0;\n\t\tlet totalHeight = 0;\n\t\tlet totalArea = 0;\n\t\n\t\tconst items = document.querySelectorAll('.featured img, .featured video');\n\t\tconst totalItems = items.length;\n\t\n\t\tconst margins = 40; // Example margin size (left and right)\n\t\n\t\titems.forEach((img) => {\n\t\t\tconst figure = img.closest('figure');\n\t\t\tconst link = figure.querySelector('.project-link-inner');\n\t\t\tconst imgWidth = parseInt(img.attributes.width.value, 10);\n\t\t\tconst imgHeight = parseInt(img.attributes.height.value, 10);\n\t\n\t\t\tconst ratio = imgWidth / imgHeight; // Aspect ratio (width divided by height)\n\t\n\t\t\t// Random size for the long edge between 240 and 480\n\t\t\tconst min = 240;\n\t\t\tconst max = 480;\n\t\t\tconst randomSizeLongEdge = Math.floor(Math.random() * (max - min + 1) + min);\n\t\n\t\t\tlet itemWidth, itemHeight;\n\t\n\t\t\t// Determine if width or height is the longest edge\n\t\t\tif (imgWidth >= imgHeight) {\n\t\t\t\t// Width is the longest edge\n\t\t\t\titemWidth = randomSizeLongEdge;\n\t\t\t\titemHeight = Math.floor(randomSizeLongEdge / ratio);\n\t\t\t} else {\n\t\t\t\t// Height is the longest edge\n\t\t\t\titemHeight = randomSizeLongEdge;\n\t\t\t\titemWidth = Math.floor(randomSizeLongEdge * ratio);\n\t\t\t}\n\t\n\t\t\t// Add the item's width and height, including margins\n\t\t\ttotalWidth += itemWidth + margins;\n\t\t\ttotalHeight += itemHeight + margins;\n\t\n\t\t\ttotalArea += (itemWidth + margins) * (itemHeight + margins);\n\t\n\t\t\tlink.style.width = `${itemWidth}px`;\n\t\t\tlink.style.height = `${itemHeight}px`;\n\t\n\t\t\tconst minPadding = 40;\n\t\t\tconst maxPadding = 80;\n\t\n\t\t\tfigure.style.padding = `${Math.floor(Math.random() * (maxPadding - minPadding + 1) + minPadding)}px`;\n\t\n\t\t\tfigure.dataset.parallax = (Math.random() * 0.4 + 0.1).toFixed(2);\n\t\t});\n\t\n\t\t// Calculate grid dimensions based on 4:3 ratio\n\t\tconst approximateRows = Math.ceil(Math.sqrt(totalItems * (3 / 4))); // More rows due to 4:3\n\t\tconst approximateCols = Math.ceil(totalItems / approximateRows);\n\t\n\t\t// Calculate the container width based on the grid\n\t\tconst containerWidth = approximateCols * (totalWidth / totalItems);\n\t\tconst containerHeight = approximateRows * (totalHeight / totalItems);\n\t\n\t\t// Ensure container height roughly matches 4:3 ratio\n\t\tconst adjustedContainerWidth = Math.max(containerWidth, containerHeight * (4 / 3));\n\t\n\t\tconst featuredContainer = document.querySelector('.featured-items');\n\t\t// featuredContainer.style.width = `${adjustedContainerWidth}px`;\n\t\n\t\t// Initialize Packery layout\n\t\tvar iso = new Packery('.featured-items', {\n\t\t\titemSelector: 'figure',\n\t\t\tresize: false\n\t\t});\n\n\t\tfeaturedContainer.style.width = document.querySelector('.featured-items').offsetWidth + 'px';\n\t}\n\n\n\tinitializeNavigation(initialRoute = false) {\n\t\t// console.log('initialize navigation');\n\t\tthis.setNavigationListeners(initialRoute);\n\t}\n\n\tsetNavigationListeners(initialRoute = false) {\n\t\tthis.initializeNavEvents();\n\t\tthis.initializeProjectsEvents();\n\t\tthis.initializeGalleryEvents(initialRoute);\n\t}\n\n\tinitializeNavEvents() {\n\t\tdocument.querySelector('.home-link').addEventListener('click', (e) => {\n\t\t\te.preventDefault();\n\t\t\tif(this.isMobile){\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.closeMobileMenus();\n\t\t\t\t}, 200);\n\t\t\t}\n\t\t\tthis.navigate('/', { state: 'featured' });\n\t\t});\n\n\t\tdocument.querySelector('.featured-link').addEventListener('click', (e) => {\n\t\t\te.preventDefault();\n\t\t\tif(this.isMobile){\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.closeMobileMenus();\n\t\t\t\t}, 200);\n\t\t\t}\n\t\t\tthis.navigate('/', { state: 'featured' });\n\t\t});\n\n\t\tdocument.querySelector('.index-link').addEventListener('click', (e) => {\n\t\t\te.preventDefault();\n\t\t\tif(this.isMobile){\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.closeMobileMenus();\n\t\t\t\t}, 200);\n\t\t\t}\n\t\t\tthis.navigate('/projects', { state: 'index' });\n\t\t});\n\n\t\tdocument.querySelector('.about-link').addEventListener('click', (e) => {\n\t\t\te.preventDefault();\n\t\t\tif(this.isMobile){\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.closeMobileMenus();\n\t\t\t\t}, 200);\n\t\t\t}\n\t\t\tthis.navigate('/about', { state: 'about' });\n\t\t});\n\n\t\tconst filterLinks = document.querySelectorAll('.filter-button');\n\t\tfilterLinks.forEach(link => {\n\t\t\tlink.addEventListener('click', (e) => {\n\t\t\t\te.preventDefault();\n\t\t\t\tconst filter = link.dataset.filter;\n\t\t\t\tif(this.isMobile){\n\t\t\t\t\tthis.closeMobileMenus();\n\t\t\t\t}\n\t\t\t\tif(link.classList.contains('active-filter') || filter === 'all') {\n\t\t\t\t\tthis.navigate('/projects', { state: 'index' });\n\t\t\t\t} else {\n\t\t\t\t\tthis.navigate(`/filter/${filter}`, { state: 'filter', filter });\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\t\n\t\tif(!this.isMobile() && !this.isTouch()) {\n\t\t\tlet navTimeout; // To store the timeout ID\n\t\t\tconst nav = document.querySelector('nav'); // Replace with the actual nav selector\n\t\t\tnav.addEventListener('mouseenter', () => {\n\t\t\t\tclearTimeout(navTimeout);\n\t\t\t\tnavTimeout = setTimeout(() => {\n\t\t\t\t\tdocument.body.classList.add('highlight-nav');\n\t\t\t\t}, 500);\n\t\t\t});\n\n\t\t\tnav.addEventListener('mouseleave', () => {\n\t\t\t\tclearTimeout(navTimeout);\n\t\t\t\tdocument.body.classList.remove('highlight-nav');\n\t\t\t});\n\t\t}\n\t}\n\n\tinitializeProjectsEvents() {\n\t\tconst projectLinks = document.querySelectorAll('.project-link');\n\t\tconst pageTitle = document.querySelector('.page-title'); // Target the page title element\n\t\tlet hoverTimeout = null; // Variable to store the timeout ID\n\t\n\t\tprojectLinks.forEach(link => {\n\t\t\tconst figure = link.closest('figure'); // Get the figure associated with the link\n\t\t\t\n\n\t\t\tif(!this.isMobile() && !this.isTouch()) {\n\t\t\t\t// Hover event with a 200ms delay\n\t\t\t\tlink.addEventListener('mouseenter', () => {\n\n\t\t\t\t\tif(this.preventInteraction) return;\n\n\t\t\t\t\thoverTimeout = setTimeout(() => {\n\t\t\t\t\t\tconst title = figure.dataset.title; // Get the data-title attribute\n\t\t\t\t\t\tif (title) {\n\t\t\t\t\t\t\tpageTitle.textContent = title; // Set the page title to the figure's title\n\t\t\t\t\t\t\tdocument.body.classList.add('show-title');\n\t\t\t\t\t\t}\n\t\t\n\t\t\t\t\t\t// Add 'not-selected' to other figures in the parent container\n\t\t\t\t\t\tconst parentContainer = figure.closest('.index, .featured');\n\t\t\t\t\t\tif (parentContainer) {\n\t\t\t\t\t\t\tconst otherFigures = parentContainer.querySelectorAll('figure');\n\t\t\t\t\t\t\totherFigures.forEach(otherFigure => {\n\t\t\t\t\t\t\t\tif (otherFigure !== figure && otherFigure.dataset.projectSlug !== figure.dataset.projectSlug) {\n\t\t\t\t\t\t\t\t\totherFigure.classList.add('not-selected');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 500); // Delay of 200ms\n\t\t\t\t});\n\t\t\n\t\t\t\t// Clear the timeout and reset classes on mouseleave\n\t\t\t\tlink.addEventListener('mouseleave', () => {\n\t\t\t\t\tclearTimeout(hoverTimeout);\n\t\t\t\t\thoverTimeout = null;\n\t\t\t\t\tdocument.body.classList.remove('show-title');\n\t\t\n\t\t\t\t\t// Remove 'not-selected' from all figures in the parent container\n\t\t\t\t\tconst parentContainer = figure.closest('.index, .featured');\n\t\t\t\t\tif (parentContainer) {\n\t\t\t\t\t\tconst allFigures = parentContainer.querySelectorAll('figure');\n\t\t\t\t\t\tallFigures.forEach(otherFigure => otherFigure.classList.remove('not-selected'));\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t}\n\t\n\t\t\t// Clear the timeout on click\n\t\t\tlink.addEventListener('click', (e) => {\n\t\t\t\tclearTimeout(hoverTimeout);\n\t\t\t\thoverTimeout = null;\n\t\t\t\te.preventDefault(); // Prevent default navigation\n\t\t\t\t\n\t\t\t\tconst title = figure.dataset.title; // Get the data-title attribute\n\t\t\t\tif (title) {\n\t\t\t\t\tpageTitle.textContent = title; // Set the page title to the figure's title\n\t\t\t\t\t// document.body.classList.add('show-title');\n\t\t\t\t}\n\n\t\t\t\tconst projectSlug = figure.dataset.projectSlug;\n\t\t\t\tlet allFigures = null;\n\n\t\t\t\tif(document.querySelector('.featured').classList.contains('active-section')) {\n\t\t\t\t\tallFigures = document.querySelectorAll('.index figure[data-categories*=\"featured\"]');\n\t\t\t\t} else {\n\t\t\t\t\tallFigures = document.querySelectorAll('.index figure:not(.unfiltered-figure)');\n\t\t\t\t}\n\n\t\t\t\tdocument.body.classList.add('hold-title');\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tdocument.body.classList.remove('hold-title');\n\t\t\t\t}, 1000);\n\t\n\t\t\t\t// Navigate to the gallery and pass the clicked `figure`\n\t\t\t\tthis.navigate(`/projects/${projectSlug}`, { state: 'project', project: projectSlug });\n\t\t\t\tthis.showProject(projectSlug, figure, allFigures);\n\t\t\t});\n\t\t});\n\t}\n\n\tinitializeGalleryEvents(initialRoute = false) {\n\t\tconst prevButton = document.querySelector('.project-controls .previous');\n\t\tconst nextButton = document.querySelector('.project-controls .next');\n\t\tconst closeButton = document.querySelector('.project-controls .close');\n\t\tconst galleryInner = document.querySelector('.gallery-inner');\n\t\n\t\tconst updateGallery = (direction) => {\n\t\t\tconst slides = Array.from(galleryInner.querySelectorAll('.gallery-slide'));\n\t\t\n\t\t\t// Hide all slides to ensure only one is visible\n\t\t\tslides.forEach(slide => slide.classList.add('hide-slide'));\n\t\t\n\t\t\t// Update the current index based on the direction\n\t\t\tif (direction === 'next') {\n\t\t\t\tthis.currentIndex = (this.currentIndex + 1) % slides.length;\n\t\t\t\tthis.loadAdjacentSlides(slides[this.currentIndex]);\n\t\t\t} else if (direction === 'prev') {\n\t\t\t\tthis.currentIndex = (this.currentIndex - 1 + slides.length) % slides.length;\n\t\t\t\tthis.loadAdjacentSlides(slides[this.currentIndex]);\n\t\t\t}\n\t\t\n\t\t\t// Show the new current slide\n\t\t\tconst currentSlide = slides[this.currentIndex];\n\t\t\tcurrentSlide.classList.remove('hide-slide');\n\n\t\t\tconst currentFigures = currentSlide.querySelectorAll('figure');\n\t\t\tcurrentFigures.forEach(figure => {\n\t\t\t\t\n\t\t\t\t\n\n\t\t\t\tif (this.isSafari) {\n\t\t\t\t\tthis.setGalleryFigureWidthSafari(figure);\n\n\t\t\t\t\tif (figure.querySelector('video')) {\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tconst loadedVideo = figure.querySelector('video');\n\t\t\t\t\t\t\tthis.setVideoDimensions(loadedVideo);\n\t\t\t\t\t\t}, 100);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t\n\t\t\t});\n\t\t\n\t\t\t// Update the page title with the title of the current slide\n\t\t\tconst currentSlideFirstFigure = slides[this.currentIndex].querySelector('figure:nth-child(1)');\n\t\t\tconst currentSlideTitle = currentSlideFirstFigure.dataset.title;\n\n\t\t\tif (!this.isMobile() && !document.body.classList.contains('hidden-page')) {\n\t\t\t\tconst pageTitle = document.querySelector('.page-title');\n\t\t\t\tif (currentSlideTitle && pageTitle && pageTitle.textContent !== currentSlideTitle) {\n\t\t\t\t\t// Use GSAP for fade-out and fade-in\n\t\t\t\t\tgsap.timeline()\n\t\t\t\t\t\t.to(pageTitle, {\n\t\t\t\t\t\t\topacity: 0, // Fade out\n\t\t\t\t\t\t\tduration: 0.2, // Quicker animation\n\t\t\t\t\t\t\tease: \"power1.out\",\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.add(() => {\n\t\t\t\t\t\t\tpageTitle.textContent = currentSlideTitle; // Update title text\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.to(pageTitle, {\n\t\t\t\t\t\t\topacity: 1, // Fade in\n\t\t\t\t\t\t\tduration: 0.2, // Quicker animation\n\t\t\t\t\t\t\tease: \"power1.in\",\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst pageTitle = document.querySelector('.page-title');\n\t\t\t\tif (currentSlideTitle && pageTitle) {\n\t\t\t\t\tpageTitle.textContent = currentSlideTitle;\n\t\t\t\t}\n\t\t\t}\n\t\t\n\t\t\t// Update the gallery-index for the current project's slide count\n\t\t\tconst currentProjectSlug = currentSlideFirstFigure.dataset.projectSlug;\n\t\t\tconst projectSlides = slides.filter(slide => \n\t\t\t\tslide.querySelector('figure:nth-child(1)').dataset.projectSlug === currentProjectSlug\n\t\t\t);\n\t\t\tconst projectIndex = (projectSlides.indexOf(currentSlide) + 1).toString().padStart(2, '0'); // Ensures 2 digits\n\t\t\tconst projectTotal = projectSlides.length.toString().padStart(2, '0'); // Ensures 2 digits\n\t\t\t\n\t\t\n\t\t\tconst galleryIndexElement = document.querySelector('.project-index');\n\t\t\tif (galleryIndexElement) {\n\t\t\t\tgalleryIndexElement.textContent = `${projectIndex} | ${projectTotal}`;\n\t\t\t}\n\t\t\n\t\t\t// Check if the slug of the new slide is different from the current active slide\n\t\t\tconst newSlug = currentSlideFirstFigure.dataset.projectSlug;\n\t\t\tconst currentActiveSlug = slides[this.currentIndex].dataset.projectSlug;\n\t\t\n\t\t\tif (newSlug && newSlug !== currentActiveSlug) {\n\t\t\t\tconst newUrl = `${this.basePath}/projects/${newSlug}`;\n\t\t\t\thistory.replaceState({ state: 'project', project: newSlug }, '', newUrl);\n\t\t\t}\n\t\t\n\t\t\t// If it's a hidden page, check caption\n\t\t\tif (document.body.classList.contains('hidden-page')) {\n\t\t\t\tthis.checkForCaption();\n\t\t\t}\n\t\t};\n\n\t\tlet clearInitialRoute = false;\n\n\t\tif(!this.isMobile()) {\n\t\t\tdocument.querySelector('.gallery').addEventListener('click', (e) => {\n\t\t\t\t// Check if the target is a video or inside a video element\n\t\t\t\tif (e.target.tagName.toLowerCase() === 'video' || e.target.closest('video')) {\n\t\t\t\t\treturn; // Do nothing if it's a video\n\t\t\t\t}\n\t\t\t\n\t\t\t\t// Find the closest slide\n\t\t\t\tconst slide = e.target.closest('.gallery-slide');\n\t\t\t\tif (slide) {\n\t\t\t\t\tconst clickX = e.clientX; // Get the horizontal click position\n\t\t\t\t\tconst screenWidth = window.innerWidth; // Get the viewport width\n\t\t\t\n\t\t\t\t\tif (clickX < screenWidth / 2) {\n\t\t\t\t\t\tupdateGallery('prev'); // Clicked on the left side\n\t\t\t\t\t} else {\n\t\t\t\t\t\tupdateGallery('next'); // Clicked on the right side\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tconst hammer = new Hammer(document.querySelector('.gallery'));\n\t\thammer.on('swiperight', () => {\n\t\t\tupdateGallery('prev');\n\t\t});\n\t\thammer.on('swipeleft', () => {\n\t\t\tupdateGallery('next');\n\t\t});\n\t\n\t\tprevButton.addEventListener('click', () => updateGallery('prev'));\n\t\tnextButton.addEventListener('click', () => updateGallery('next'));\n\t\tcloseButton.addEventListener('click', () => {\n\t\t\tif((initialRoute && !clearInitialRoute) || document.body.classList.contains('hidden-page')) {\n\t\t\t\t// this.navigate('/', { state: 'featured' });\n\t\t\t\t// clearInitialRoute = true;\n\t\t\t\twindow.location.href = document.body.getAttribute('data-basepath');\n\t\t\t} else {\n\t\t\t\thistory.back();\n\t\t\t}\n\t\t});\n\n\t\tdocument.addEventListener('keydown', (event) => {\n\t\t\tswitch (event.key) {\n\t\t\t\tcase 'ArrowLeft': // Navigate to the previous slide\n\t\t\t\t\tupdateGallery('prev');\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'ArrowRight': // Navigate to the next slide\n\t\t\t\t\tupdateGallery('next');\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'Escape': // Close the gallery\n\t\t\t\t\thistory.back();\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak; // Ignore other keys\n\t\t\t}\n\t\t});\n\t}\n\n\tcheckForCaption() {\n\t\tconst activeSlide = document.querySelector('.gallery-slide:not(.hide-slide)');\n\t\tif(!activeSlide) return;\n\t\tconst figures = activeSlide.querySelectorAll('figure');\n\t\tconst hiddenCaption = document.querySelector('.hidden-caption');\n\n\t\t// Initialize caption as empty\n\t\tlet caption = '';\n\n\t\t// Loop through the figures to find the first data-caption\n\t\tfigures.forEach(figure => {\n\t\t\tif (figure.dataset.caption) {\n\t\t\t\tcaption = figure.dataset.caption;\n\t\t\t}\n\t\t});\n\n\t\t// Set the content and display of .hidden-caption\n\t\tif (caption) {\n\t\t\thiddenCaption.textContent = caption;\n\t\t\thiddenCaption.style.display = 'block';\n\t\t} else {\n\t\t\thiddenCaption.textContent = '';\n\t\t\thiddenCaption.style.display = 'none';\n\t\t}\n\n\t}\n\n\tinitializeGallery(projectSlug, clickedFigure = null, allFigures, initialRoute = false) {\n\n\t\t// console.log(initialRoute);\n\n\t\tconst galleryInner = document.querySelector('.gallery-inner');\n\t\tconst figures = Array.from(document.querySelectorAll('.index figure'));\n\n\t\t\n\t\tconst activeFigures = allFigures ? allFigures : document.querySelectorAll('.index figure');\n\t\tgalleryInner.innerHTML = ''; // Clear existing gallery content\n\t\tconst slides = [];\n\t\tlet currentSlide = [];\n\t\n\t\tconst activeFiguresArray = Array.from(activeFigures); // Convert NodeList to an array for mutability\n\t\tconst processedIndices = new Set(); // Keep track of indices that have been added to slides\n\n\t\tactiveFiguresArray.forEach((figure, index) => {\n\t\t\tif (processedIndices.has(index)) return; // Skip figures that have already been added to a slide\n\n\t\t\tconst isDiptych = figure.dataset.isDiptych === 'true';\n\t\t\tconst nextFigure = activeFiguresArray[index + 1];\n\t\t\tconst sameProject = nextFigure?.dataset.projectSlug === figure.dataset.projectSlug;\n\n\t\t\tif (isDiptych && sameProject) {\n\t\t\t\t// Add the current figure and the next figure as a diptych\n\t\t\t\tslides.push([figure, nextFigure]);\n\t\t\t\tprocessedIndices.add(index); // Mark the current figure as processed\n\t\t\t\tprocessedIndices.add(index + 1); // Mark the next figure as processed\n\t\t\t} else {\n\t\t\t\t// Add the current figure as a single slide\n\t\t\t\tslides.push([figure]);\n\t\t\t\tprocessedIndices.add(index); // Mark the current figure as processed\n\t\t\t}\n\t\t});\n\t\n\t\t// Generate slides dynamically\n\t\tslides.forEach(slideFigures => {\n\t\t\tconst slide = document.createElement('div');\n\t\t\tslide.classList.add('gallery-slide');\n\t\n\t\t\tslideFigures.forEach(figure => {\n\t\t\t\tconst figureElement = document.createElement('figure');\n\t\n\t\t\t\t// Map camelCase attributes back to kebab-case\n\t\t\t\tconst attributeMap = {\n\t\t\t\t\ttitle: 'data-title',\n\t\t\t\t\tclient: 'data-client',\n\t\t\t\t\tprojectUrl: 'data-project-url',\n\t\t\t\t\tprojectSlug: 'data-project-slug',\n\t\t\t\t\tgallery: 'data-gallery',\n\t\t\t\t\tgalleryjpeg: 'data-galleryjpeg',\n\t\t\t\t\tgalleryWidth: 'data-gallery-width',\n\t\t\t\t\tgalleryHeight: 'data-gallery-height',\n\t\t\t\t\tisDiptych: 'data-is-diptych',\n\t\t\t\t\tvideoUrl: 'data-video-url',\n\t\t\t\t\tisPortrait: 'data-is-portrait',\n\t\t\t\t\tautoplay: 'data-autoplay',\n\t\t\t\t\tcaption: 'data-caption',\n\t\t\t\t};\n\t\t\t\n\t\t\t\t// Copy relevant data attributes from the index figure to the gallery figure\n\t\t\t\tObject.entries(attributeMap).forEach(([camelCase, kebabCase]) => {\n\t\t\t\t\tif (figure.dataset[camelCase]) {\n\t\t\t\t\t\tfigureElement.setAttribute(kebabCase, figure.dataset[camelCase]);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\n\t\t\t\tconst isVideo = figure.dataset.videoUrl !== undefined;\n\t\t\t\tconst mediaUrl = figure.dataset.gallery;\n\t\t\t\tconst mediaWidth = figure.dataset.galleryWidth;\n\t\t\t\tconst mediaHeight = figure.dataset.galleryHeight;\n\t\n\t\t\t\tif (isVideo) {\n\t\t\t\t\tconst videoElement = document.createElement('video');\n\t\t\t\t\tvideoElement.src = figure.dataset.videoUrl;\n\t\t\t\t\tvideoElement.poster = figure.dataset.galleryjpeg || '';\n\t\t\t\t\tvideoElement.width = mediaWidth ? parseInt(mediaWidth, 10) : undefined;\n\t\t\t\t\tvideoElement.height = mediaHeight ? parseInt(mediaHeight, 10) : undefined;\n\t\t\t\t\tvideoElement.loop = true;\n\t\t\t\t\tvideoElement.playsInline = true;\n\t\t\t\t\tvideoElement.preload = 'metadata';\n\t\t\t\t\tif (figure.dataset.autoplay) {\n\t\t\t\t\t\tvideoElement.autoplay = true;\n\t\t\t\t\t\tvideoElement.muted = true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvideoElement.controls = true;\n\t\t\t\t\t\tvideoElement.controlsList = 'nodownload';\n\t\t\t\t\t}\n\t\t\t\t\tvideoElement.style.aspectRatio = `${mediaWidth}/${mediaHeight}`;\n\t\t\t\t\tfigureElement.appendChild(videoElement);\n\t\t\t\t} else if (mediaUrl) {\n\t\t\t\t\tconst imgElement = document.createElement('img');\n\t\t\t\t\timgElement.src = 'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=';\n\t\t\t\t\timgElement.dataset.src = mediaUrl;\n\t\t\t\t\timgElement.dataset.srcjpeg = figure.dataset.galleryjpeg;\n\t\t\t\t\timgElement.width = mediaWidth ? parseInt(mediaWidth, 10) : undefined;\n\t\t\t\t\timgElement.height = mediaHeight ? parseInt(mediaHeight, 10) : undefined;\n\t\t\t\t\tfigureElement.appendChild(imgElement);\n\t\t\t\t}\n\t\n\t\t\t\tslide.appendChild(figureElement);\n\t\t\t});\n\t\n\t\t\tgalleryInner.appendChild(slide);\n\t\t});\n\t\n\t\t// Ensure all slides are hidden initially\n\t\tconst slidesInGallery = galleryInner.querySelectorAll('.gallery-slide');\n\t\tslidesInGallery.forEach(slide => (slide.classList.add('hide-slide')));\n\t\n\t\t// Determine the starting slide index\n\t\tlet startIndex = 0;\n\t\t// if (clickedFigure && clickedFigure.closest('.index')) {\n\t\tif (clickedFigure) {\n\t\t\tconst clickedGallery = clickedFigure.dataset.gallery;\n\t\t\tstartIndex = slides.findIndex(slide =>\n\t\t\t\tArray.from(slide).some(figure => figure.dataset.gallery === clickedGallery)\n\t\t\t);\n\t\t\tif (startIndex === -1) startIndex = 0;\n\t\t} else {\n\t\t\tstartIndex = slides.findIndex(slide =>\n\t\t\t\tslide.some(figure => figure.dataset.projectSlug === projectSlug)\n\t\t\t);\n\t\t\tif (startIndex === -1) startIndex = 0;\n\t\t}\n\t\n\t\t// Show the starting slide\n\t\tif (slidesInGallery[startIndex]) {\n\t\t\tconst startingSlideTitle = slidesInGallery[startIndex].querySelector('figure').dataset.title;\n\t\t\tconst pageTitle = document.querySelector('.page-title');\n\t\t\tif (startingSlideTitle && pageTitle) {\n\t\t\t\tpageTitle.textContent = startingSlideTitle;\n\t\t\t}\n\t\n\t\t\tslidesInGallery[startIndex].classList.remove('hide-slide');\n\n\t\t\tthis.loadMedia(slidesInGallery[startIndex]);\n\t\t\tthis.loadAdjacentSlides(slidesInGallery[startIndex]);\n\t\n\t\t\t// Synchronize currentIndex with the starting slide\n\t\t\tthis.currentIndex = startIndex;\n\n\t\t\tconst currentFigures = slidesInGallery[startIndex].querySelectorAll('figure');\n\t\t\tcurrentFigures.forEach(figure => {\n\t\t\t\t\n\n\t\t\t\tif (this.isSafari) {\n\t\t\t\t\tthis.setGalleryFigureWidthSafari(figure);\n\n\t\t\t\t\tif (figure.querySelector('video')) {\n\t\t\t\t\t\tconst loadedVideo = figure.querySelector('video');\n\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.setVideoDimensions(loadedVideo);\n\t\t\t\t\t\t}, 100);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t\n\n\t\t\t\t// if (this.isSafari) {\n\t\t\t\t// \tthis.setGalleryFigureWidthSafari(figure);\n\t\t\t\t// }\n\t\t\t});\n\t\t}\n\n\t\t// Show the total number of slides\n\t\tif (slidesInGallery[startIndex]) {\n\t\t\tconst startingSlideTitle = slidesInGallery[startIndex].querySelector('figure').dataset.title;\n\t\t\tconst pageTitle = document.querySelector('.page-title');\n\t\t\tif (startingSlideTitle && pageTitle) {\n\t\t\t\tpageTitle.textContent = startingSlideTitle;\n\t\t\t}\n\t\t\n\t\t\tslidesInGallery[startIndex].classList.remove('hide-slide');\n\t\t\n\t\t\tthis.loadMedia(slidesInGallery[startIndex]);\n\t\t\tthis.loadAdjacentSlides(slidesInGallery[startIndex]);\n\t\t\n\t\t\t// Synchronize currentIndex with the starting slide\n\t\t\tthis.currentIndex = startIndex;\n\t\t\n\t\t\t// Update the gallery-index\n\t\t\tconst currentSlide = slides[startIndex];\n\t\t\tconst currentProjectSlug = currentSlide[0].dataset.projectSlug;\n\t\t\tconst projectSlides = slides.filter(slide =>\n\t\t\t\tslide.some(figure => figure.dataset.projectSlug === currentProjectSlug)\n\t\t\t);\n\t\t\tconst projectIndex = String(projectSlides.indexOf(currentSlide) + 1).padStart(2, '0'); // Ensures 2 digits\n\t\t\tconst projectTotal = String(projectSlides.length).padStart(2, '0'); // Ensures 2 digits\n\t\t\n\t\t\tconst galleryIndexElement = document.querySelector('.project-index');\n\t\t\tif (galleryIndexElement) {\n\t\t\t\tgalleryIndexElement.textContent = `${projectIndex} | ${projectTotal}`;\n\t\t\t}\n\t\t}\n\t}\n\n\tinitializeHiddenGallery() {\n\n\t\tconst firstSlide = document.querySelector('.gallery .gallery-slide:first-child');\n\t\t\n\t\tthis.loadAdjacentSlides(document.querySelector('.gallery .gallery-slide:first-child'));\n\n\t\tconst currentFigures = firstSlide.querySelectorAll('figure');\n\t\tcurrentFigures.forEach(figure => {\n\n\t\t\tif (this.isSafari) {\n\t\t\t\tthis.setGalleryFigureWidthSafari(figure);\n\n\t\t\t\tif (figure.querySelector('video')) {\n\t\t\t\t\tconst loadedVideo = figure.querySelector('video');\n\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tthis.setVideoDimensions(loadedVideo);\n\t\t\t\t\t}, 100);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t\n\n\t\t\t\n\t\t});\n\t}\n\n\tstartVideos(videos) {\n\n\t\tvideos.forEach(video => {\n\t\t\tvideo.play();\n\t\t});\n\n\t}\n\n\tstopVideos(videos) {\n\t\t\n\t\tvideos.forEach(video => {\n\t\t\tvideo.pause();\n\t\t});\n\n\t}\n\n\tloadAdjacentSlides(currentSlide) {\n\t\tconst slides = Array.from(document.querySelectorAll('.gallery-slide'));\n\t\tconst currentIndex = slides.findIndex(slide => slide === currentSlide);\n\t\tconst totalSlides = slides.length;\n\t\n\t\t// Calculate indices for two before and two after with looping\n\t\tconst indicesToLoad = [\n\t\t\t(currentIndex - 2 + totalSlides) % totalSlides,\n\t\t\t(currentIndex - 1 + totalSlides) % totalSlides,\n\t\t\tcurrentIndex,\n\t\t\t(currentIndex + 1) % totalSlides,\n\t\t\t(currentIndex + 2) % totalSlides,\n\t\t];\n\t\n\t\t// Load media for the required slides\n\t\tindicesToLoad.forEach(index => {\n\t\t\tthis.loadMedia(slides[index]);\n\t\t});\n\t\n\t\t// Stop all videos except for those on the current slide\n\t\tslides.forEach((slide, index) => {\n\t\t\tconst videos = slide.querySelectorAll('video');\n\t\t\tif (index === currentIndex) {\n\t\t\t\t// Start videos for the current slide\n\t\t\t\t// if the video has attr autoplay\n\t\t\t\tvideos.forEach(video => {\n\t\t\t\t\tif(video.hasAttribute('autoplay')) {\n\t\t\t\t\t\tvideo.play();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t// this.startVideos(videos);\n\t\t\t} else {\n\t\t\t\t// Stop videos for other slides\n\t\t\t\tthis.stopVideos(videos);\n\t\t\t}\n\t\t});\n\t}\n\n\tcheckWebPSupport() {\n\t\tconst canvas = document.createElement('canvas');\n\t\treturn canvas.getContext && canvas.getContext('2d')\n\t\t\t? canvas.toDataURL('image/webp').indexOf('data:image/webp') === 0\n\t\t\t: false;\n\t}\n\n\tloadMedia(container) {\n\n\t\tif (!container) {\n\t\t\tconsole.error('Container element not found');\n\t\t\treturn;\n\t\t}\n\n\t\t\n\t\tconst figures = container.querySelectorAll('figure:not(.loaded):not(.loading)');\n\t\tif (!figures.length) return;\n\t\n\t\n\t\tfigures.forEach(figure => {\n\t\t\tfigure.classList.add('loading'); // Add loading class\n\t\n\t\t\tconst video = figure.querySelector('video[data-src]');\n\t\t\tconst img = figure.querySelector('img[data-src]');\n\t\n\t\t\tconst mediaElements = [];\n\t\t\tif (video) {\n\t\t\t\tvideo.src = video.dataset.src;\n\t\n\t\t\t\t// if (isSafari) {\n\t\t\t\t// \tvideo.addEventListener('loadeddata', () => {\n\t\t\t\t// \t\tvideo.currentTime = 1; // Set to first frame in Safari\n\t\t\t\t// \t}, { once: true });\n\t\t\t\t// }\n\t\t\t\tmediaElements.push(video);\n\t\t\t}\n\t\t\tif (img) {\n\t\t\t\t// Use data-src for WebP if supported, otherwise data-srcjpeg\n\t\t\t\timg.src = this.checkWebPSupport ? img.dataset.src : img.dataset.srcjpeg;\n\t\t\t\tmediaElements.push(img);\n\t\t\t}\n\t\n\t\t\t// Wait for all media to load\n\t\t\tPromise.all(mediaElements.map(media => new Promise(resolve => {\n\t\t\t\tif (media.tagName === 'VIDEO') {\n\t\t\t\t\tmedia.onloadeddata = resolve;\n\t\t\t\t} else {\n\t\t\t\t\tmedia.onload = resolve;\n\t\t\t\t}\n\t\t\t\tmedia.onerror = resolve; // Handle errors gracefully\n\t\t\t}))).then(() => {\n\t\t\t\tfigure.classList.remove('loading');\n\t\t\t\tfigure.classList.add('previously-loaded');\n\t\t\t\tfigure.classList.add('loaded');\n\t\t\t\n\t\t\t});\n\t\t});\n\t}\n\n\tsetVideoDimensions(video) {\n\t\trequestAnimationFrame(() => {\n\t\t\tconst containerWidth = video.parentElement.clientWidth; // Width of the parent container\n\t\t\tconst containerHeight = video.parentElement.clientHeight; // Height of the parent container\n\t\t\tconst intrinsicWidth = parseInt(video.getAttribute('width')); // Intrinsic width of the video\n\t\t\tconst intrinsicHeight = parseInt(video.getAttribute('height')); // Intrinsic height of the video\n\t\n\t\t\tif (!intrinsicWidth || !intrinsicHeight) return; // Fail-safe if intrinsic dimensions are unavailable\n\t\n\t\t\t// Calculate effective dimensions based on object-fit: contain\n\t\t\tconst widthRatio = containerWidth / intrinsicWidth;\n\t\t\tconst heightRatio = containerHeight / intrinsicHeight;\n\t\t\tconst scale = Math.min(widthRatio, heightRatio); // Scale to fit within container\n\t\n\t\t\tconst finalWidth = Math.round(intrinsicWidth * scale); // Final rendered width\n\t\t\tconst finalHeight = Math.round(intrinsicHeight * scale); // Final rendered height\n\t\n\t\t\t// Set the video element's width and height attributes to match its rendered size\n\t\t\tvideo.style.width = `${finalWidth}px`;\n\t\t\tvideo.style.height = `${finalHeight}px`;\n\t\n\t\t});\n\t}\n\n\tsetGalleryFigureWidthSafari(figure) {\n\t\t// if (!figure.dataset.isDiptych) return;\n\t\tif (figure.dataset.isDiptych !== \"true\") return;\n\t\n\t\tconst media = figure.querySelector('img, video');\n\t\tif (!media) return;\n\t\n\t\t// const containerWidth = figure.clientWidth;\n\t\tconst containerWidth = this.isMobile ? (window.innerWidth - 40)/2 : (window.innerWidth - 180)/2;\n\t\t// const containerHeight = figure.clientHeight;\n\t\tconst containerHeight = this.isMobile ? (window.innerHeight - 100) : (window.innerHeight - 190);\n\n\t\tconst intrinsicWidth = parseInt(media.getAttribute('width')); // Intrinsic width\n\t\tconst intrinsicHeight = parseInt(media.getAttribute('height')); // Intrinsic height\n\n\t\t// console.log(containerWidth, containerHeight, intrinsicWidth, intrinsicHeight);\n\n\n\t\tif (!intrinsicWidth || !intrinsicHeight) return; // Fail-safe if intrinsic dimensions are unavailable\n\n\t\t// Calculate effective dimensions based on object-fit: contain\n\t\tconst widthRatio = containerWidth / intrinsicWidth;\n\t\tconst heightRatio = containerHeight / intrinsicHeight;\n\t\tconst scale = Math.min(widthRatio, heightRatio); // Scale to fit within container\n\n\t\tconst finalWidth = intrinsicWidth * scale; // Final rendered width\n\t\tfigure.style.width = `${finalWidth}px`;\n\n\t\t// Check and adjust the next sibling figure if it also has data-is-diptych\n\t\tconst nextFigure = figure.nextElementSibling;\n\t\tif (nextFigure) {\n\t\t\tconst nextMedia = nextFigure.querySelector('img, video');\n\t\t\tif (nextMedia) {\n\t\t\t\tconst nextIntrinsicWidth = parseInt(nextMedia.getAttribute('width'));\n\t\t\t\tconst nextIntrinsicHeight = parseInt(nextMedia.getAttribute('height'));\n\n\t\t\t\tconst nextWidthRatio = containerWidth / nextIntrinsicWidth;\n\t\t\t\tconst nextHeightRatio = containerHeight / nextIntrinsicHeight;\n\t\t\t\tconst nextScale = Math.min(nextWidthRatio, nextHeightRatio);\n\n\t\t\t\tconst nextFinalWidth = nextIntrinsicWidth * nextScale;\n\t\t\t\tnextFigure.style.width = `${nextFinalWidth}px`;\n\t\t\t}\n\t\t}\n\t}\n\n}","import home from 'modules/home';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    new home();\n});\n"],"mappings":"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"}